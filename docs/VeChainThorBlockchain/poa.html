

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Proof of Authority (PoA) &mdash; VeChain Documentation (Legacy) 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/js/versionwarning.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Built-in Smart Contracts" href="built-in.html" />
    <link rel="prev" title="Multi-party Payment Protocol (MPP)" href="mpp.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> VeChain Documentation (Legacy)
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">VeChainThor Blockchain</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">What is VeChainThor?</a></li>
<li class="toctree-l2"><a class="reference internal" href="two.html">Two-token design</a></li>
<li class="toctree-l2"><a class="reference internal" href="block.html">Block</a></li>
<li class="toctree-l2"><a class="reference internal" href="tx-model.html">Transaction Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpp.html">Multi-party Payment Protocol (MPP)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Proof of Authority (PoA)</a></li>
<li class="toctree-l2"><a class="reference internal" href="built-in.html">Built-in Smart Contracts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../GetStarted/index.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Smart-Contrac-Standard-and-Library/index.html">Smart Contrac Standard and Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Connex-js/index.html">Connex-js</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Development-Tools/index.html">Development Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Turnkey-Solutions/index.html">Turnkey Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Hardware/index.html">Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Contribute/index.html">Contribute</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">VeChain Documentation (Legacy)</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">VeChainThor Blockchain</a> &raquo;</li>
        
      <li>Proof of Authority (PoA)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/VeChainThorBlockchain/poa.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="proof-of-authority-poa">
<h1>Proof of Authority (PoA)<a class="headerlink" href="#proof-of-authority-poa" title="Permalink to this headline">¶</a></h1>
<p>One of the biggest decisions when designing a public blockchain system is about designing the consensus algorithm. The protocol not only dictates how blockchain participants agree on the blockchain grows but embodies the governance model imposed upon the system.</p>
<p>Recall that the underlying design philosophy of our governance model is that</p>
<p><em>neither a total centralization nor a total decentralization would be the correct answer, but a compromise from and balance of both would</em>.</p>
<p>VeChainThor implements the Proof of Authority (PoA) consensus algorithm which suits our governance model which states that there would not be anonymous block producers, but a fixed number of known validators (Authority Masternodes) authorized by the steering committee of the VeChain Foundation.</p>
<blockquote>
<div>“It takes twenty years to build a reputation and five minutes to ruin it. If you think about that, you’ll do things differently.” – Warren Buffet</div></blockquote>
<p>To be an Authority Masternode (AM), the individual or entity voluntarily discloses who they are (identity and reputation by extension) to the VeChain Foundation in exchange for the right to validate and produce blocks. It is their identities and reputations placed at stake that give all the AMs additional incentives to behave and keep the network secure. In VeChainThor, each AM has to go through a strict know-your-customer (KYC) procedure and satisfy the minimum requirements set by the Foundation.</p>
<p>When discussing a consensus algorithm, we must answer the following questions:</p>
<ul class="simple">
<li>When is a new block produced?</li>
<li>Who generates the block?</li>
<li>How to choose the “trunk” from two legitimate blockchain branches?</li>
</ul>
<div class="section" id="when">
<h2>When<a class="headerlink" href="#when" title="Permalink to this headline">¶</a></h2>
<p>VeChainThor schedules a new block to be generated once every <img alt="$\Delta$" src="https://doc.vechainworld.io/images//5825a0b-delta.PNG" /> seconds. We set <img alt="$\Delta=10$" src="https://doc.vechainworld.io/images//219eb51-delta10.PNG" />, which is based on our estimation of the usage of VeChainThor.  Let <img alt="$t_0$" src="https://doc.vechainworld.io/images//b518391-t0.PNG" /> be the timestamp of the genesis block. The timestamp of the block with height <img alt="$h&gt;0$" src="https://doc.vechainworld.io/images//6c53611-h-0.PNG" />, <img alt="$t_h$" src="https://doc.vechainworld.io/images//79f7844-th.PNG" />, must satisfy <img alt="$t_h=t_0+m\Delta$" src="https://doc.vechainworld.io/images//8ba41ac-th_formula.PNG" /> where <img alt="$m\in \mathbb{N}^+$" src="https://doc.vechainworld.io/images//c44a258-m_n.PNG" /> and <img alt="$m\geq h$" src="https://doc.vechainworld.io/images//ee1c38b-m--h.PNG" />.</p>
</div>
<div class="section" id="who">
<h2>Who<a class="headerlink" href="#who" title="Permalink to this headline">¶</a></h2>
<p>PoA allows every available AM to have an equal opportunity to be selected to produce blocks. To do that, we introduce a deterministic pseudo-random process (DPRP) and the “active/inactive” AM status to decide whether a particular AM <em><strong>a</strong></em> is legitimate for producing a block <em><strong>B(h,t)</strong></em> with height <em><strong>h</strong></em> (<code class="docutils literal notranslate"><span class="pre">uint32</span></code>) and timestamp <em><strong>t</strong></em> (<code class="docutils literal notranslate"><span class="pre">uint64</span></code>). Here <em><strong>t</strong></em> must satisfy <img alt="https://doc.vechainworld.io/images//2a7864f-t-t0.PNG" src="https://doc.vechainworld.io/images//2a7864f-t-t0.PNG" />. We first define the DPRP to generate a pseudo-random number <img alt="$\gamma(h,t)$" src="https://doc.vechainworld.io/images//8849993-garma.PNG" /> as:</p>
<p><img alt="https://doc.vechainworld.io/images//57a2f24-gamma_formula.PNG" src="https://doc.vechainworld.io/images//57a2f24-gamma_formula.PNG" /></p>
<p>where <img alt="$\circ$" src="https://doc.vechainworld.io/images//7d0cc4a-circle.png" /> denotes the operation that concatenates two byte arrays.</p>
<p>Let <img alt="$A_B$" src="https://doc.vechainworld.io/images//6674073-AB.PNG" /> denote the sorted set of AMs with the “active” status in the state associated with block <em><strong>B</strong></em>. Note that in VeChainThor each AM is given a fixed index number and the numbers are used to sort elements in <img alt="$A_B$" src="https://doc.vechainworld.io/images//6674073-AB.PNG" />. To verify whether <em><strong>a</strong></em> is the legitimate AM for producing <em><strong>B(h,t)</strong></em>, we first define</p>
<p><img alt="$A_{B(h,t)}^a=sort\big(A_{PA(B(h,t))} \cup a\big)$" src="https://doc.vechainworld.io/images//03e777d-AAB.PNG" /></p>
<p>where <img alt="$PA(\cdot)$" src="https://doc.vechainworld.io/images//e87edf5-PA.PNG" /> returns the parent block. We then compute index <img alt="$i^a(h,t)$" src="https://doc.vechainworld.io/images//96446bb-iaht.PNG" /> as:</p>
<p><img alt="$i^a (h,t)=\gamma(h,t),\textrm{mod},|A_{B(h,t)}^a|$" src="https://doc.vechainworld.io/images//ce66c7e-iaht_formula.PNG" /></p>
<p>AM <em><strong>a</strong></em> is the legitimate producer of <em><strong>B(h,t)</strong></em> if and only if <img alt="$A_{B(h,t)}^a\big[i^a (h,t)\big]=a$" src="https://doc.vechainworld.io/images//47fc086-aabht_formula.PNG" />. Note that we put double quotes around the word “active” to emphasize that the status does not directly reflect the physical condition of a certain AM, but merely a status derived from the incoming information from the network.</p>
</div>
<div class="section" id="am-status-updating">
<h2>AM Status Updating<a class="headerlink" href="#am-status-updating" title="Permalink to this headline">¶</a></h2>
<p>Given the latest block <img alt="$B(h,t_1)$" src="https://doc.vechainworld.io/images//5f15b73-bht1.PNG" /> and its parent <img alt="$B(h-1,t_0)$" src="https://doc.vechainworld.io/images//c11155f-bh-1.PNG" />, for any <img alt="$t_0&lt;t&lt;t_1$" src="https://doc.vechainworld.io/images//9526240-t0-t-t1.PNG" /> and <img alt="https://doc.vechainworld.io/images//2a7864f-t-t0.PNG" src="https://doc.vechainworld.io/images//2a7864f-t-t0.PNG" />, the system computes AM <img alt="$a_t$" src="https://doc.vechainworld.io/images//4f359ef-at.PNG" /> such that</p>
<p><img alt="https://doc.vechainworld.io/images//4f392f1-aa1bhtformula.PNG" src="https://doc.vechainworld.io/images//4f392f1-aa1bhtformula.PNG" /></p>
<p>and mark <img alt="$a_t$" src="https://doc.vechainworld.io/images//4f359ef-at.PNG" /> as “inactive” in the state associated with <img alt="$B(h,t_1)$" src="https://doc.vechainworld.io/images//5f15b73-bht1.PNG" />. In addition, the system always sets the status of the AM that generates <img alt="$B(h,t_1)$" src="https://doc.vechainworld.io/images//5f15b73-bht1.PNG" /> as “active”. Note that we set all the AMs as “active” from the beginning.</p>
</div>
<div class="section" id="trunk">
<h2>Trunk<a class="headerlink" href="#trunk" title="Permalink to this headline">¶</a></h2>
<p>The final question we need to answer is how to choose the “trunk” from two legitimate blockchain branches. Since there is no computational competition in PoA, the “longest chain” rule does not apply. Instead, we consider the better branch as the one witnessed by more AMs.</p>
<p>To do that, we compute the accumulated witness number (AWN),<em>π</em>, for block <img alt="$B(h,t)$" src="https://doc.vechainworld.io/images//8778653-bht.PNG" /> as:</p>
<p><img alt="https://doc.vechainworld.io/images//1a5f86f-paibht.PNG" src="https://doc.vechainworld.io/images//1a5f86f-paibht.PNG" /></p>
<p>with <img alt="https://doc.vechainworld.io/images//c2a434b-paibgenesis.PNG" src="https://doc.vechainworld.io/images//c2a434b-paibgenesis.PNG" />. Since <img alt="$|A_{B(h,t)}|$" src="https://doc.vechainworld.io/images//f3df345-abht.PNG" /> computes the number of AMs with “active” status associated with <img alt="$B(h,t)$" src="https://doc.vechainworld.io/images//8778653-bht.PNG" />, it can be viewed as the number of AMs that witness the generation of <img alt="$B(h,t)$" src="https://doc.vechainworld.io/images//8778653-bht.PNG" />. Therefore, we select the branch with the larger AWN as the trunk. If the AWNs are the same, we choose the branch with less length. Note that the AWN is stored in the block header as <code class="docutils literal notranslate"><span class="pre">TotalScore</span></code>.</p>
<p>Formally, given two branches <img alt="β1" src="https://doc.vechainworld.io/images//50e44f5-1.PNG" /> and <img alt="β2" src="https://doc.vechainworld.io/images//5dfa040-2.PNG" /> with their latest blocks <img alt="$B_1(h_1,t_1)$" src="https://doc.vechainworld.io/images//3fe3920-b1h1t1.PNG" /> and <img alt="$B_2(h_2,t_2)$" src="https://doc.vechainworld.io/images//3e56e97-bht2.PNG" />, respectively, we first calculate their AWNs <img alt="https://doc.vechainworld.io/images//3e9e34c-B1.PNG" src="https://doc.vechainworld.io/images//3e9e34c-B1.PNG" /> and <img alt="https://doc.vechainworld.io/images//739356a-B2.PNG" src="https://doc.vechainworld.io/images//739356a-B2.PNG" />. The system then makes the following decision: choose <img alt="β1" src="https://doc.vechainworld.io/images//50e44f5-1.PNG" />  as the trunk if <img alt="$\pi_{B_1}&gt;\pi_{B_2}$" src="https://doc.vechainworld.io/images//9913d7d-B1-B2.PNG" />, or <img alt="β2" src="https://doc.vechainworld.io/images//5dfa040-2.PNG" /> if <img alt="$\pi_{B_1}&lt;\pi_{B_2}$" src="https://doc.vechainworld.io/images//f6dee27-B1--B2.PNG" />. In case <img alt="$\pi_{B_1}=\pi_{B_2}$" src="https://doc.vechainworld.io/images//6fbe6bc-B1B2.PNG" />, choose <img alt="$\mathcal{B}_1$ if $h_1&lt;h_2$ or $\mathcal{B}_2$ if $h_1&gt;h_2$" src="https://doc.vechainworld.io/images//62a15e1-1-_2.PNG" />. If <img alt="$h_1=h_2$" src="https://doc.vechainworld.io/images//454a4c5-h1h2.PNG" />, keep the current trunk.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="built-in.html" class="btn btn-neutral float-right" title="Built-in Smart Contracts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="mpp.html" class="btn btn-neutral float-left" title="Multi-party Payment Protocol (MPP)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, VeChain Developers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>