

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>&lt;no title&gt; &mdash; VeChain Documentation Legacy 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> VeChain Documentation Legacy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul class="simple">
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">VeChain Documentation Legacy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
      <li>&lt;no title&gt;</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/letvego-2020-4-13/v1.1/Development Tools/thorify-introduction.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p>—
title: “Thorify”
slug: “thorify-introduction”
excerpt: “<a class="reference external" href="https://github.com/vechain/thorify">https://github.com/vechain/thorify</a>”
hidden: false
createdAt: “2019-02-22T03:46:37.973Z”
updatedAt: “2019-04-09T12:13:03.487Z”
—
# What is Thorify?</p>
<p>A web3 adaptor for VeChain [Thor](<a class="reference external" href="https://github.com/vechain/thor">https://github.com/vechain/thor</a>) RESTful API.</p>
<p>## Install</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">bash</span>
<span class="pre">npm</span> <span class="pre">install</span> <span class="pre">--save</span> <span class="pre">thorify</span>
<span class="pre">npm</span> <span class="pre">install</span> <span class="pre">--save</span> <span class="pre">web3&#64;1.0.0-beta.37</span>&#160;&#160; <span class="pre">#</span> <span class="pre">Web3</span> <span class="pre">is</span> <span class="pre">needed</span> <span class="pre">as</span> <span class="pre">dependency.</span>
<span class="pre">`</span></code></p>
<p>## Usage</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a>` javascript
// ES6 style
import { thorify } from “thorify”;
const Web3 = require(“web3”);           // Recommend using require() instead of import here</p>
<p>const web3 = thorify(new Web3(), “<a class="reference external" href="http://localhost:8669">http://localhost:8669</a>”);</p>
<p>web3.eth.getBlock(“latest”).then(res =&gt; console.log(res));
// Best block info will be displayed
<a href="#id3"><span class="problematic" id="id4">``</span></a><a href="#id5"><span class="problematic" id="id6">`</span></a></p>
<p>If you would like to write code in ES5, check below for the initialization code.</p>
<p><a href="#id7"><span class="problematic" id="id8">``</span></a>` javascript
// ES5 style
const thorify = require(“thorify”).thorify;
const Web3 = require(“web3”);</p>
<p>const web3 = thorify(new Web3(), “<a class="reference external" href="http://localhost:8669">http://localhost:8669</a>”);</p>
<p>web3.eth.getBlock(“latest”).then(res =&gt; console.log(res));
// Best block info will be displayed
<a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a></p>
<p>## Web3 method supported</p>
<p><a href="#id13"><span class="problematic" id="id14">``</span></a>`
web3 instance
├── eth
│   ├── getBlockNumber
│   ├── getBalance
│   ├── getStorageAt
│   ├── getCode
│   ├── getBlock
│   ├── getTransaction
│   ├── getTransactionReceipt
│   ├── sendTransaction
│   ├── sendSignedTransaction
│   ├── call
│   ├── estimateGas
│   ├── getPastLogs
│   ├── subscribe
│   ├── clearSubscriptions
│   ├── getEnergy
│   ├── getChainTag
│   ├── getBlockRef
│   ├── accounts
│   └── Contract
│       ├── Constructor(new Contract())
│       ├── clone
│       ├── deploy
│       ├── methods
│       ├── methods.myMethod.call
│       ├── methods.myMethod.send
│       ├── methods.myMethod.estimateGas
│       ├── methods.myMethod.encodeABI
│       ├── events
│       ├── once
│       ├── events.myEvent
│       ├── events.allEvents
│       └── getPastEvents
└── utils</p>
<p><a href="#id15"><span class="problematic" id="id16">``</span></a><a href="#id17"><span class="problematic" id="id18">`</span></a></p>
<p>## Send Transaction</p>
<p>In Thor official implementation , the client <strong>DOES NOT</strong> neither manage user’s private-key/keyStore nor use private key to sign a Transaction. Unfortunately, thorify can not directly perform <cite>eth_sendTransaction</cite> but there is another way to sign a transaction.</p>
<p>In [web3.js accounts](<a class="reference external" href="https://web3js.readthedocs.io/en/1.0/web3-eth-accounts.html#eth-accounts">https://web3js.readthedocs.io/en/1.0/web3-eth-accounts.html#eth-accounts</a>), it gives the opportunity to add your private-key, stored in your runtime context (In Node.js context, it’s stored in memory while in Browser context, it’s stored in memory/local storage), to accounts module. When you are trying to send a transaction, the module will check the private key associated with from field. Once the private key and from have been matched, the module will sign the transaction.
The APIs that follows the mechanism are:</p>
<ul class="simple">
<li><cite>web3.eth.sendTransaction()</cite></li>
<li><cite>contract.deploy.send()</cite></li>
<li><cite>contract.methods.myMethod.send()</cite></li>
</ul>
<p>## Documentation</p>
<p>[API Reference](<a class="reference external" href="https://thorify.vecha.in/#/">https://thorify.vecha.in/#/</a>?id=api-reference)</p>
<p>## Play with multi-clause</p>
<ol class="arabic simple">
<li>[thor-devkit.js](<a class="reference external" href="https://github.com/vechain/thor-devkit.js">https://github.com/vechain/thor-devkit.js</a>) supports multi-clause and sign transaction</li>
<li>send signed transaction using [sendSignedTransaction](<a class="reference external" href="https://vechain.github.io/thorify/#/">https://vechain.github.io/thorify/#/</a>?id=send-signed-transaction)</li>
</ol>
<p>## FAQ</p>
<p>### Web3-Gear vs Thorify</p>
<p>Thor only supports RESTful API other than ethereum’s JSON-RPC, so we developed two component for the developers familiar with ethereum’s develop kits. <cite>web3-gear</cite> is a standalone program that accepts JSON-RPC calls and transforms the requests to thor’s RESTful API and <cite>thorify</cite> is an extended web3 that sends the request directly to thor’s RESTful API.So,</p>
<ul class="simple">
<li>If you are writing smart contract using [truffle](<a class="reference external" href="http://truffleframework.com/)/[remix-ide](https://remix.ethereum.org/">http://truffleframework.com/)/[remix-ide](https://remix.ethereum.org/</a>) or other tools that uses original web3, you should use <cite>Web3-Gear</cite>.</li>
<li>If you are writing some application or scripts executing in <cite>Node.js</cite> or <cite>Browser</cite> environment, you should use <cite>Thorify</cite>.</li>
</ul>
<p>### How do I send VTHO token</p>
<p>VTHO is a token that compatible with VIP180(ERC-20), you can build a contract instance using <cite>web3</cite> and do what ever you want.</p>
<ul class="simple">
<li>[VTHO source code](<a class="reference external" href="https://github.com/vechain/thor/blob/master/builtin/gen/energy.sol">https://github.com/vechain/thor/blob/master/builtin/gen/energy.sol</a>)</li>
<li>Contract Address: <cite>0x0000000000000000000000000000456E65726779</cite></li>
</ul>
<p>### Multi party payment protocol or sponsored contract</p>
<p>It’s done by calling the functions of prototype contract, check [wiki page](<a class="reference external" href="https://github.com/vechain/thor/wiki/Prototype(EN">https://github.com/vechain/thor/wiki/Prototype(EN</a>)) for detailed info about prototype contract.</p>
<p>### Method not supported</p>
<p>The RESTful API of Thor is different with Ethereum’s JSON-RPC, therefore, there are some methods in web3 are not supported by thorify, feel free to open an issue discuss the features.</p>
<p>There is a possibility that when you trying to call <cite>sendTransaction</cite> or <cite>send</cite> functions, thorify will return <cite>Method not supported</cite> under version 0.3.1, due to account module will check the private key associated with <cite>from</cite> field. After upgrade to version 0.3.1 or newer, thorify will show <a href="#id19"><span class="problematic" id="id20">`</span></a>The private key corresponding to from filed can’t be found in local eth.accounts.wallet ` to make an error more specific.</p>
<p>### Subscriptions support</p>
<p>Need <a class="reference external" href="mailto:thor&#37;&#52;&#48;v1&#46;0&#46;2">thor<span>&#64;</span>v1<span>&#46;</span>0<span>&#46;</span>2</a> and later to work with subscription module.</p>
<p>## Notes</p>
<ul class="simple">
<li>There are three special block number in Ethereum: <cite>earliest</cite>,`latest`,`pending`. In VeChain Thor, we introduced <cite>best</cite> block and there is no <cite>pending</cite> block, so they will be replaced with <cite>0</cite> (aka genesis), <cite>best</cite>, <cite>best</cite></li>
</ul>
<p>## Compatibility</p>
<p>Currently, <cite>thorify</cite> is compatible with <cite>&gt;= web3&#64;1.0.0-beta.1</cite> and <cite>&lt;= web3&#64;1.0.0-beta.37</cite>.</p>
<p>## License</p>
<p>This project is licensed under the MIT license, Copyright (c) 2017 VeChain Foundation. For more information see LICENSE.md.</p>
<p><a href="#id21"><span class="problematic" id="id22">``</span></a>`
The MIT License</p>
<p>Copyright (c) 2017 VeChain Foundation</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the “Software”), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
<a href="#id23"><span class="problematic" id="id24">``</span></a><a href="#id25"><span class="problematic" id="id26">`</span></a></p>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, VeChain Developers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>