

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Security &mdash; VeChain Documentation Legacy 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Resources" href="resources.html" />
    <link rel="prev" title="Design Patterns" href="design-patterns.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> VeChain Documentation Legacy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../VeChainThorBlockchain/index.html">VeChainThor Blockchain</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../VeChainThorBlockchain/overview.html">What is VeChainThor?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../VeChainThorBlockchain/overview.html#business-friendly-meta-transaction-features">Business Friendly Meta-transaction Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../VeChainThorBlockchain/overview.html#proof-of-authority-poa">Proof of Authority (“PoA”)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../VeChainThorBlockchain/overview.html#governance">Governance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../VeChainThorBlockchain/overview.html#economic-model">Economic Model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../VeChainThorBlockchain/two.html">Two-token design</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../VeChainThorBlockchain/two.html#vet">VET</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../VeChainThorBlockchain/two.html#vtho">VTHO</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../VeChainThorBlockchain/block.html">Block</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../VeChainThorBlockchain/tx-model.html">Transaction Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../VeChainThorBlockchain/mpp.html">Multi-party Payment Protocol (MPP)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../VeChainThorBlockchain/mpp.html#functions-related-to-user">Functions related to <em>User</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../VeChainThorBlockchain/mpp.html#functions-related-to-the-credit-plan">Functions related to the <em>credit plan</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../VeChainThorBlockchain/mpp.html#functions-related-master">Functions related <em>Master</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../VeChainThorBlockchain/mpp.html#functions-related-to-sponsor">Functions related to <em>Sponsor</em></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../VeChainThorBlockchain/poa.html">Proof of Authority (PoA)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../VeChainThorBlockchain/poa.html#when">When</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../VeChainThorBlockchain/poa.html#who">Who</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../VeChainThorBlockchain/poa.html#am-status-updating">AM Status Updating</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../VeChainThorBlockchain/poa.html#trunk">Trunk</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../VeChainThorBlockchain/built-in.html">Built-in Smart Contracts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../GetStarted/index.html">Get Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../GetStarted/how-to-node.html">How to deploy a VeChainThor node</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../GetStarted/docker.html">Docker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../GetStarted/docker.html#run-vechainthor-authority-masternode-in-docker">Run VeChainThor Authority Masternode in docker</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../GetStarted/docker.html#run-node-in-docker">Run node in docker</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../GetStarted/aws.html">AWS Marketplace</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../GetStarted/aws.html#this-is-an-example-of-solo-node-deployment">This is an example of “solo node” deployment.</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../GetStarted/source.html">Source code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../GetStarted/source.html#installation">Installation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../GetStarted/public.html">Public VeChainThor nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../GetStarted/how-to-deploy.html">How to deploy a smart contract</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../GetStarted/how-to-deploy.html#quick-start">Quick Start</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../GetStarted/how-to-develop.html">How to develop a dApp</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../GetStarted/how-to-1.html">Intro</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../GetStarted/how-to-1.html#whats-web-application"><strong>What’s Web Application?</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../GetStarted/how-to-1.html#what-is-dapp"><strong>What is DApp?</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../GetStarted/how-to-1.html#write-a-dapp-sync-and-connex"><strong>Write a DApp: Sync and Connex</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../GetStarted/how-to-1.html#token-transfer-a-simple-dapp-in-javascript"><strong>Token Transfer: A Simple DApp in Javascript</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../GetStarted/how-to-2.html">Components and Coding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../GetStarted/how-to-2.html#preparation"><strong>Preparation</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../GetStarted/how-to-2.html#setup-in-3-minutes"><strong>Setup in 3 minutes</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../GetStarted/how-to-2.html#coding"><strong>Coding</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../GetStarted/how-to-2.html#put-things-together"><strong>Put Things Together</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../GetStarted/how-to-2.html#test-the-app"><strong>Test the App</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../GetStarted/how-to-2.html#one-more-thing"><strong>One More Thing</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../GetStarted/how-to-3.html">Setup &amp; Walk Around</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../GetStarted/how-to-3.html#setup-in-3-minutes"><strong>Setup in 3 minutes</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../GetStarted/how-to-3.html#poke-around-familiar-with-sync"><strong>Poke around: Familiar with Sync</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../GetStarted/how-to-3.html#play-with-connex-js-apis"><strong>Play with Connex.js APIs</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../GetStarted/how-to-3.html#summary"><strong>Summary</strong></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Smart Contrac Standard and Library</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../best-practice.html">Smart contract development best practice</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../best-practice.html#vechainthor-solidity-the-right-way">VeChainThor Solidity The Right Way</a></li>
<li class="toctree-l3"><a class="reference internal" href="../best-practice.html#motivation">Motivation</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../best-practice.html#general-philosophy">General Philosophy</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="recommendations.html">Recommendations</a></li>
<li class="toctree-l4"><a class="reference internal" href="design-patterns.html">Design Patterns</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Security</a></li>
<li class="toctree-l4"><a class="reference internal" href="resources.html">Resources</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vip180-token.html">VIP180 fungible token</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vip180-token.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vip180-token.html#specification">Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vip180-token.html#methods">Methods</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../vip180-token.html#name">name</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vip180-token.html#symbol">symbol</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vip180-token.html#decimals">decimals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vip180-token.html#totalsupply">totalSupply</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vip180-token.html#balanceof">balanceOf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vip180-token.html#transfer">transfer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vip180-token.html#transferfrom">transferFrom</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vip180-token.html#approve">approve</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vip180-token.html#allowance">allowance</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../vip180-token.html#events">Events</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../vip180-token.html#id1">Transfer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vip180-token.html#approval">Approval</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../list-of-vip180-token.html">List of VIP180 tokens</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vip181-token.html">VIP181 non-fungible token</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vip181-token.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vip181-token.html#specification">Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vip181-token.html#methods">Methods</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../vip181-token.html#name">name</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vip181-token.html#symbol">symbol</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vip181-token.html#totalsupply">totalSupply</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vip181-token.html#balanceof">balanceOf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vip181-token.html#ownerof">ownerOf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vip181-token.html#transferfrom">transferFrom</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vip181-token.html#approve">approve</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vip181-token.html#getapproved">getApproved</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../vip181-token.html#setapprovalforall">setApprovalForAll</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vip181-token.html#isapprovedforall">isApprovedForAll</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vip181-token.html#events">Events</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../vip181-token.html#transfer">Transfer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vip181-token.html#approval">Approval</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vip181-token.html#approvalforall">ApprovalForAll</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vechain-thornode-contract.html">VeChainThor Node token contract</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vechain-thornode-contract.html#getmetadata">getMetadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vechain-thornode-contract.html#applyupgrade">applyUpgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vechain-thornode-contract.html#cancelupgrade">cancelUpgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vechain-thornode-contract.html#gettokenparams">getTokenParams</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vechain-thornode-contract.html#idtoowner">idToOwner</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vechain-thornode-contract.html#ownertoid">ownerToId</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vechain-thornode-contract.html#createsaleauction">createSaleAuction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vechain-thornode-contract.html#createdirectionalsaleauction">createDirectionalSaleAuction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vechain-thornode-contract.html#bid">bid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vechain-thornode-contract.html#cancelauction">cancelAuction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vechain-thornode-contract.html#addauctionwhitelist">addAuctionWhiteList</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vechain-thornode-contract.html#removeauctionwhitelist">removeAuctionWhiteList</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Connex-js/index.html">Connex-js</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Connex-js/connex.html">What is Connex?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Connex-js/connex.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Connex-js/connex.html#get-started">Get Started</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/connex.html#vechain-app-bootstrapping">VeChain App Bootstrapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/connex.html#install">Install</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/connex.html#usage">Usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Connex-js/connex.html#resource">Resource</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Connex-js/connex.html#architecture-explained">Architecture explained</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Connex-js/connex.html#faq">FAQ</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/connex.html#typescript-complier-does-not-find-connex">TypeScript complier does not find Connex</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Connex-js/connex.html#license">License</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Connex-js/connex-api-reference.html">Connex API reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Connex-js/setup-your-connex-environment.html">Setup the Connex environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Connex-js/connex-framework.html">Connex Framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Connex-js/connex-framework.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Connex-js/connex-framework.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Connex-js/connex-framework.html#see-also">See also</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/connex-framework.html#driver-implementations">Driver implementations:</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/connex-framework.html#connex-playground">Connex playground</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Connex-js/connex-implementation-test.html">Connex implementation test</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Connex-js/connex-implementation-test.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Connex-js/connex-implementation-test.html#project-setup">Project setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/connex-implementation-test.html#compiles-and-hot-reloads-for-development">Compiles and hot-reloads for development</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/connex-implementation-test.html#compiles-and-minifies-for-production">Compiles and minifies for production</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/connex-implementation-test.html#run-your-tests">Run your tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/connex-implementation-test.html#lints-and-fixes-files">Lints and fixes files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/connex-implementation-test.html#customize-configuration">Customize configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Connex-js/demo.html">Example Connex app</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Connex-js/demo/vechain-insight.html">Insight</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/demo/vechain-insight.html#what-is-insight">What is Insight?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/demo/vechain-insight.html#screenshots">Screenshots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/demo/vechain-insight.html#project-setup">Project setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/demo/vechain-insight.html#contribute">Contribute</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Connex-js/demo/inspector.html">Inspector</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/demo/inspector.html#project-setup">Project setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/demo/inspector.html#contribute">Contribute</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Connex-js/demo/buy-me-a-coffee.html">Buy Me A Coffee</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/demo/buy-me-a-coffee.html#generate-one-for-you">Generate One For You</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/demo/buy-me-a-coffee.html#development">Development</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/demo/buy-me-a-coffee.html#contribute">Contribute</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Connex-js/demo/energy-station.html">Energy Station (testnet only)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/demo/energy-station.html#what-is-energy-station">What is Energy Station</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/demo/energy-station.html#concept">Concept</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/demo/energy-station.html#deployment">Deployment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/demo/energy-station.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Connex-js/demo/energy-station.html#contribute">Contribute</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Development-Tools/index.html">Development Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Development-Tools/java-sdk-introduction.html">Thor Java Client SDK?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/java-sdk-introduction.html#get-started">Get Started</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/java-sdk-introduction.html#create-jar">Create JAR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/java-sdk-introduction.html#add-jar-to-project">Add JAR to project</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/java-sdk-introduction.html#license">License</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/java-sdk-introduction.html#set-blockchain-nodes-provider">Set blockchain nodes provider</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/java-sdk-introduction.html#you-can-find-the-clients-toolkit-under-the-directory">You can find the clients toolkit under the directory :</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/java-sdk-introduction.html#walletutils">WalletUtils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/java-sdk-introduction.html#accountclient">AccountClient</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/java-sdk-introduction.html#transactionclient">TransactionClient</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/java-sdk-introduction.html#blockclient">BlockClient</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/java-sdk-introduction.html#logsclient">LogsClient</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/java-sdk-introduction.html#blockchainclient">BlockchainClient</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/java-sdk-introduction.html#prototypeclient">ProtoTypeClient</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/java-sdk-introduction.html#run-the-test">Run the test</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/java-sdk-introduction.html#java-console-approach">4. Java console approach</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Development-Tools/thorify-introduction.html">Thorify</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/thorify-introduction.html#install">Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/thorify-introduction.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/thorify-introduction.html#web3-method-supported">Web3 method supported</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/thorify-introduction.html#send-transaction">Send Transaction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/thorify-introduction.html#documentation">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/thorify-introduction.html#play-with-multi-clause">Play with multi-clause</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/thorify-introduction.html#faq">FAQ</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/thorify-introduction.html#web3-gear-vs-thorify">Web3-Gear vs Thorify</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/thorify-introduction.html#how-do-i-send-vtho-token">How do I send VTHO token</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/thorify-introduction.html#multi-party-payment-protocol-or-sponsored-contract">Multi party payment protocol or sponsored contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/thorify-introduction.html#method-not-supported">Method not supported</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/thorify-introduction.html#subscriptions-support">Subscriptions support</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/thorify-introduction.html#notes">Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/thorify-introduction.html#compatibility">Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/thorify-introduction.html#license">License</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Development-Tools/web3-gear.html">Web3-gear</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/web3-gear.html#installation">Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/web3-gear.html#on-os-x">On OS x</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/web3-gear.html#on-ubuntu">On Ubuntu</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/web3-gear.html#on-window">On Window</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/web3-gear.html#run">Run</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/web3-gear.html#use-remix">Use Remix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/web3-gear.html#use-truffle">Use Truffle</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Development-Tools/dev-kit.html">Thor DevKit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/dev-kit.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/dev-kit.html#usage">Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/dev-kit.html#crypto-methods">Crypto methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/dev-kit.html#rlp">RLP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/dev-kit.html#transaction">Transaction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/dev-kit.html#certificate">Certificate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/dev-kit.html#abi">ABI</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/dev-kit.html#license">License</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Development-Tools/ide.html">VIDE (VeChain-IDE)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/ide.html#installation">INSTALLATION:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/ide.html#documentation">Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Development-Tools/consistency.html">Smart Contract Consistency Verification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/consistency.html#install">Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/consistency.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/consistency.html#example">Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/consistency.html#download-compiler">Download Compiler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/consistency.html#methods">Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/consistency.html#references">References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/consistency.html#license">License</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Development-Tools/clients.html">Compatible Clients</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/clients/comet.html">Comet</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/clients/comet.html#what-is-comet">What is Comet?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/clients/comet.html#comet-compatibility-guide">Comet Compatibility Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/clients/comet.html#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/clients/comet.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Development-Tools/clients/sdk.html">Sync</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/clients/sdk.html#build-from-source">Build From Source</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/clients/sdk.html#contributing">Contributing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/clients/sdk.html#acknowledgement">Acknowledgement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/clients/sdk.html#license">License</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/clients/sdk.html#user-guide">User Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/clients/sdk.html#resources">Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Development-Tools/clients/sdk.html#contribute">Contribute</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Development-Tools/faucet.html">TestNet Faucet</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Tutorials/index.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/how-to-setup-the-development-environment.html">Setup the development environment using Truffle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/how-to-setup-the-development-environment.html#getting-started">Getting Started</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/how-to-setup-the-development-environment.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/how-to-setup-the-development-environment.html#development-stack">Development Stack</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/how-to-setup-the-development-environment.html#installing">Installing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/how-to-setup-the-development-environment.html#running-the-vechainthor-local-node">Running the VeChainThor Local Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/how-to-setup-the-development-environment.html#web3-gear">Web3-Gear</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/how-to-setup-the-development-environment.html#truffle">Truffle</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/custom-network.html">Setup VeChainThor custom network</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/custom-network.html#requirement">Requirement：</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/custom-network.html#before-you-start">Before You Start</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/custom-network.html#configure-your-genesis-file">Configure Your Genesis File</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/custom-network.html#genesis-description-object">Genesis Description Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/custom-network.html#authority">Authority</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/custom-network.html#params">Params</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/custom-network.html#launch-custom-network">Launch Custom Network</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/custom-network/sample-customnetwork.html">Sample CustomNetwork</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/solo.html">Install VeChain SOLO development environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/solo.html#part-1-install-vechain-thor-software">Part 1 — Install VeChain Thor software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/solo.html#part-1-1-install-debian-9-x64">Part 1.1 — Install Debian 9 x64</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/solo.html#part-1-2-install-vechain-thor-node-software">Part 1.2 — Install VeChain Thor Node software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/solo.html#part-2-connect-sync-to-the-solo-network">Part 2 —Connect Sync to the SOLO network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/solo.html#part-2-1-install-sync-and-connect-it-to-the-solo-networks">Part 2.1 — Install Sync and connect it to the SOLO networks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/solo.html#part-3-interact-with-the-solo-node-using-sync">Part 3 — Interact with the SOLO Node using Sync</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/solo.html#part-3-1-send-vet-vthor-using-sync">Part 3.1 — Send VET/VTHOR using Sync</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/solo.html#part-3-2-deploy-a-smart-contract-to-the-solo-network-through-sync">Part 3.2 — Deploy a smart contract to the SOLO network through Sync</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/solo.html#part-3-3-interact-with-the-smart-contract">Part 3.3 — Interact with the Smart Contract</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/built-in.html">How to use built-in contracts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/built-in.html#sample-code">Sample code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/built-in.html#thor-builtins">thor-builtins</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/built-in.html#builtin-contracts">builtin contracts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/built-in.html#library-builtin">Library Builtin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/built-in.html#how-to-use-it">How to use it</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/built-in.html#instance-contracts">instance contracts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/vip180.html">How to add your VIP180 token to wallets, explorer and applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/vip191.html">How to Integrate VIP-191</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/vip191/intro.html">Intro</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/vip191/intro.html#what-is-vip-191">What is VIP-191?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/vip191/intro.html#why-is-vip-191-important">Why is VIP-191 Important?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/vip191/intro.html#where-does-vip-191-come-to-play">Where does VIP-191 Come to Play?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/vip191/intro.html#how-does-vip-191-work">How does VIP-191 Work?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/vip191/1.html">User’s side</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/vip191/1.html#deploy-the-smart-contract">Deploy the Smart Contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/vip191/1.html#build-a-transaction-body">Build a Transaction Body</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/vip191/1.html#generate-a-user-signature">Generate a User Signature</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/vip191/1.html#get-a-sponsor-signature">Get a Sponsor Signature</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/vip191/1.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/vip191/2.html">Sponsor’s side</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/vip191/2.html#sponsors-server-code">Sponsor’s Server Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/vip191/2.html#back-to-the-users-side">Back to the User’s side</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/vip191/2.html#an-example-result">An Example Result</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/vip191/2.html#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Turnkey-Solutions/index.html">Turnkey Solutions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Turnkey-Solutions/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Turnkey-Solutions/wallet.html">The VeChainThor Wallet SDKs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Turnkey-Solutions/wallet/android.html">Wallet - Android</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/wallet/android.html#gradle-compiler-environment-android-studio">Gradle compiler environment（Android Studio）</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/wallet/android.html#api-reference">API Reference：</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/wallet/android.html#several-main-data-structures">Several main data structures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/wallet/android.html#license">License</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Turnkey-Solutions/wallet/ios.html">Wallet - iOS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/wallet/ios.html#requires-ios-10">Requires iOS 10</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/wallet/ios.html#latest-version-1-0-0">Latest version 1.0.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/wallet/ios.html#support-installation-with-cocoapods">Support installation with CocoaPods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/wallet/ios.html#set-up-the-node-environment-test-node-environment-main-node-environment-and-custom-node-environment">Set up the node environment. (<code class="docutils literal notranslate"><span class="pre">Test_Node</span> <span class="pre">environment</span></code> , <code class="docutils literal notranslate"><span class="pre">Main_Node</span> <span class="pre">environment</span></code> and custom node environment)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/wallet/ios.html#how-to-run-simple-demo">How to run simple demo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/wallet/ios.html#api-reference">API Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/wallet/ios.html#support-dapp-development-environment-in-webview-by-calling-class-walletdapphandle">Support DApp development environment in Webview by calling class: WalletDAppHandle</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Turnkey-Solutions/vekey.html">VeKey based Secure Identity Turnkey Solution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Turnkey-Solutions/vekey/mac.html">VeKey Bridge Tool Manual (Mac)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/vekey/mac.html#tool-feature-list">2.1. Tool Feature List</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/vekey/mac.html#requirements">2.2. Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/vekey/mac.html#install-vekey-bridge-tool">3.1. Install VeKey Bridge Tool</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/vekey/mac.html#vekey-bridge-tool-operation">3.2. VeKey Bridge Tool Operation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/vekey/mac.html#vekey-device-firmware-upgrade">3.3. VeKey device firmware upgrade</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/vekey/mac.html#vekey-bridge-tool-upgrade">3.4. VeKey Bridge Tool upgrade</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/vekey/mac.html#vekey-bridge-tool-menu">3.5. VeKey Bridge Tool Menu</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/vekey/mac.html#other-settings">3.6. Other settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Turnkey-Solutions/vekey/windows.html">VeKey Bridge Tool Manual (Windows)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/vekey/windows.html#tool-feature-list">2.1. Tool Feature List</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/vekey/windows.html#requirements">2.2. Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/vekey/windows.html#install-vekey-bridge-tool">3.1. Install VeKey Bridge Tool</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/vekey/windows.html#vekey-bridge-tool-operation">3.2 VeKey Bridge Tool Operation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/vekey/windows.html#windows-tray-zone">3.3 Windows tray zone</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/vekey/windows.html#vekey-device-firmware-upgrade">3.4 VeKey device firmware upgrade</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/vekey/windows.html#vekey-bridge-tool-upgrade">3.5 VeKey Bridge Tool upgrade</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/vekey/windows.html#vekey-bridge-tool-menu">3.6 VeKey Bridge Tool Menu</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Turnkey-Solutions/vekey/windows.html#other-settings">3.7. Other settings</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Turnkey-Solutions/hsm.html">HSM based Key Escrow Turnkey Solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Turnkey-Solutions/share.html">VeKey based Threshold Signature Turnkey Solution</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Hardware/index.html">Hardware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Hardware/chips.html">Passive IoT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Hardware/vekey.html">VeKey Manual</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Hardware/vekey.html#first-time-to-set-pin-code">First time to set PIN code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Hardware/vekey.html#first-time-to-set-fingerprint">First time to set fingerprint</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Hardware/vekey.html#pin-code-verification">PIN code verification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Hardware/vekey.html#fingerprint-verification">Fingerprint verification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Hardware/vekey.html#daily-starting-up">Daily starting up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Hardware/vekey.html#main-menu">Main menu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Hardware/vekey.html#signature">Signature</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Hardware/vekey.html#about">About</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Hardware/security.html">VeKey - Secure Identity Device</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Contribute/index.html">Contribute</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VeChain Documentation Legacy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Smart Contrac Standard and Library</a> &raquo;</li>
        
          <li><a href="../best-practice.html">Smart contract development best practice</a> &raquo;</li>
        
      <li>Security</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/Smart-Contrac-Standard-and-Library/best-practice/security.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="security">
<h1>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h1>
<div class="section" id="reentrancy">
<h2>Reentrancy<a class="headerlink" href="#reentrancy" title="Permalink to this headline">¶</a></h2>
<p>One of the major dangers of <a class="reference external" href="https://doc.vechainworld.io/page/recommendations#section-external-calls">calling external contracts</a> is that they can take over the control flow, and make changes to your data that the calling function wasn’t expecting. This class of bug can take many forms, and both of the major bugs that led to the DAO’s collapse were bugs of this sort.</p>
<div class="section" id="reentrancy-on-a-single-function">
<h3>Reentrancy on a Single Function<a class="headerlink" href="#reentrancy-on-a-single-function" title="Permalink to this headline">¶</a></h3>
<p>The first version of this bug to be noticed involved functions that could be called repeatedly, before the first invocation of the function was finished. This may cause the different invocations of the function to interact in destructive ways.</p>
<div class="highlight-sol notranslate"><div class="highlight"><pre><span></span><span class="c1">// INSECURE</span>
<span class="kd">mapping</span> <span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="kt">uint256</span><span class="p">)</span> <span class="kr">private</span> <span class="n">userBalances</span><span class="p">;</span>

<span class="kd">function</span> <span class="n">withdrawBalance</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="kt">uint256</span> <span class="n">amountToWithdraw</span> <span class="o">=</span> <span class="n">userBalances</span><span class="p">[</span><span class="nb">msg.sender</span><span class="p">];</span>
    <span class="c1">// At this point, the caller&#39;s code is executed, and can call withdrawBalance again</span>
    <span class="nf">require</span><span class="p">(</span><span class="nb">msg.sender</span><span class="p">.</span><span class="nf">call</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="n">amountToWithdraw</span><span class="p">)());</span>
    <span class="n">userBalances</span><span class="p">[</span><span class="nb">msg.sender</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Since the user’s balance is not set to 0 until the very end of the function, the second (and later) invocations will still succeed, and will withdraw the balance over and over again.</p>
<p>!!! Factoid
A DAO is a Decentralized Autonomous Organization. Its goal is to codify the rules and decisionmaking apparatus of an organization, eliminating the need for documents and people in governing, creating a structure with decentralized control.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>On June 17th 2016, [The DAO](https://www.coindesk.com/understanding-dao-hack-journalists) was hacked and 3.6 million Ether ($50 Million) were stolen using the first reentrancy attack.

Ethereum Foundation issued a critical update to rollback the hack. This resulted in Ethereum being forked into Ethereum Classic and Ethereum.
</pre></div>
</div>
<p>In the example given, the best mitigation method is to <a class="reference external" href="https://doc.vechainworld.io/page/recommendations#section-use-caution-when-making-external-calls">use <code class="docutils literal notranslate"><span class="pre">send()</span></code> instead of <code class="docutils literal notranslate"><span class="pre">call.value()()</span></code></a>. This will limit any external code from being executed.</p>
<p>However, if you can’t remove the external call, the next simplest way to prevent this attack is to make sure you don’t call an external function until you’ve done all the internal work you need to do:</p>
<div class="highlight-sol notranslate"><div class="highlight"><pre><span></span><span class="kd">mapping</span> <span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="kt">uint256</span><span class="p">)</span> <span class="kr">private</span> <span class="n">userBalances</span><span class="p">;</span>

<span class="kd">function</span> <span class="n">withdrawBalance</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="kt">uint256</span> <span class="n">amountToWithdraw</span> <span class="o">=</span> <span class="n">userBalances</span><span class="p">[</span><span class="nb">msg.sender</span><span class="p">];</span>
    <span class="n">userBalances</span><span class="p">[</span><span class="nb">msg.sender</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="c1">// The user&#39;s balance is already 0, so future invocations won&#39;t withdraw anything</span>
    <span class="nf">require</span><span class="p">(</span><span class="nb">msg.sender</span><span class="p">.</span><span class="nf">call</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="n">amountToWithdraw</span><span class="p">)());</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that if you had another function which called <code class="docutils literal notranslate"><span class="pre">withdrawBalance()</span></code>, it would be potentially subject to the same attack, so you must treat any function which calls an untrusted contract as itself untrusted. See below for further discussion of potential solutions.</p>
</div>
<div class="section" id="cross-function-reentrancy">
<h3>Cross-function Reentrancy<a class="headerlink" href="#cross-function-reentrancy" title="Permalink to this headline">¶</a></h3>
<p>An attacker may also be able to do a similar attack using two different functions that share the same state.</p>
<div class="highlight-sol notranslate"><div class="highlight"><pre><span></span><span class="c1">// INSECURE</span>
<span class="kd">mapping</span> <span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="kt">uint256</span><span class="p">)</span> <span class="kr">private</span> <span class="n">userBalances</span><span class="p">;</span>

<span class="kd">function</span> <span class="nf">transfer</span><span class="p">(</span><span class="kt">address</span> <span class="n">to</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">userBalances</span><span class="p">[</span><span class="nb">msg.sender</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
       <span class="n">userBalances</span><span class="p">[</span><span class="n">to</span><span class="p">]</span> <span class="o">+=</span> <span class="n">amount</span><span class="p">;</span>
       <span class="n">userBalances</span><span class="p">[</span><span class="nb">msg.sender</span><span class="p">]</span> <span class="o">-=</span> <span class="n">amount</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="n">withdrawBalance</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="kt">uint256</span> <span class="n">amountToWithdraw</span> <span class="o">=</span> <span class="n">userBalances</span><span class="p">[</span><span class="nb">msg.sender</span><span class="p">];</span>
    <span class="c1">// At this point, the caller&#39;s code is executed, and can call transfer()</span>
    <span class="nf">require</span><span class="p">(</span><span class="nb">msg.sender</span><span class="p">.</span><span class="nf">call</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="n">amountToWithdraw</span><span class="p">)());</span>
    <span class="n">userBalances</span><span class="p">[</span><span class="nb">msg.sender</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this case, the attacker calls <code class="docutils literal notranslate"><span class="pre">transfer()</span></code> when their code is executed on the external call in <code class="docutils literal notranslate"><span class="pre">withdrawBalance</span></code>. Since their balance has not yet been set to 0, they are able to transfer the tokens even though they already received the withdrawal. This vulnerability was also used in the DAO attack.</p>
<p>The same solutions will work, with the same caveats. Also note that in this example, both functions were part of the same contract. However, the same bug can occur across multiple contracts, if those contracts share state.</p>
</div>
</div>
<div class="section" id="pitfalls-in-reentrancy-solutions">
<h2>Pitfalls in Reentrancy Solutions<a class="headerlink" href="#pitfalls-in-reentrancy-solutions" title="Permalink to this headline">¶</a></h2>
<p>Since reentrancy can occur across multiple functions, and even multiple contracts, any solution aimed at preventing reentrancy with a single function will not be sufficient.</p>
<p>Instead, <strong>we have recommended finishing all internal work (ie. state changes) first, and only then calling the external function</strong>. This rule, if followed carefully, will allow you to avoid vulnerabilities due to reentrancy. However, you need to not only avoid calling external functions too soon, but also avoid calling functions which call external functions. For example, the following is insecure:</p>
<div class="highlight-sol notranslate"><div class="highlight"><pre><span></span><span class="c1">// INSECURE</span>
<span class="kd">mapping</span> <span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="kt">uint256</span><span class="p">)</span> <span class="kr">private</span> <span class="n">userBalances</span><span class="p">;</span>
<span class="kd">mapping</span> <span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="kt">bool</span><span class="p">)</span> <span class="kr">private</span> <span class="n">claimedBonus</span><span class="p">;</span>
<span class="kd">mapping</span> <span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="kt">uint256</span><span class="p">)</span> <span class="kr">private</span> <span class="n">rewardsForA</span><span class="p">;</span>

<span class="kd">function</span> <span class="n">withdrawReward</span><span class="p">(</span><span class="kt">address</span> <span class="n">recipient</span><span class="p">)</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="kt">uint256</span> <span class="n">amountToWithdraw</span> <span class="o">=</span> <span class="n">rewardsForA</span><span class="p">[</span><span class="n">recipient</span><span class="p">];</span>
    <span class="n">rewardsForA</span><span class="p">[</span><span class="n">recipient</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nf">require</span><span class="p">(</span><span class="n">recipient</span><span class="p">.</span><span class="nf">call</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="n">amountToWithdraw</span><span class="p">)());</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="n">getFirstWithdrawalBonus</span><span class="p">(</span><span class="kt">address</span> <span class="n">recipient</span><span class="p">)</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="nf">require</span><span class="p">(</span><span class="o">!</span><span class="n">claimedBonus</span><span class="p">[</span><span class="n">recipient</span><span class="p">]);</span> <span class="c1">// Each recipient should only be able to claim the bonus once</span>

    <span class="n">rewardsForA</span><span class="p">[</span><span class="n">recipient</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">100</span><span class="p">;</span>
    <span class="n">withdrawReward</span><span class="p">(</span><span class="n">recipient</span><span class="p">);</span> <span class="c1">// At this point, the caller will be able to execute getFirstWithdrawalBonus again.</span>
    <span class="n">claimedBonus</span><span class="p">[</span><span class="n">recipient</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Even though <code class="docutils literal notranslate"><span class="pre">getFirstWithdrawalBonus()</span></code> doesn’t directly call an external contract, the call in <code class="docutils literal notranslate"><span class="pre">withdrawReward()</span></code> is enough to make it vulnerable to a reentrancy. You therefore need to treat <code class="docutils literal notranslate"><span class="pre">withdrawReward()</span></code> as if it were also untrusted.</p>
<div class="highlight-sol notranslate"><div class="highlight"><pre><span></span><span class="kd">mapping</span> <span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="kt">uint256</span><span class="p">)</span> <span class="kr">private</span> <span class="n">userBalances</span><span class="p">;</span>
<span class="kd">mapping</span> <span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="kt">bool</span><span class="p">)</span> <span class="kr">private</span> <span class="n">claimedBonus</span><span class="p">;</span>
<span class="kd">mapping</span> <span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="kt">uint256</span><span class="p">)</span> <span class="kr">private</span> <span class="n">rewardsForA</span><span class="p">;</span>

<span class="kd">function</span> <span class="n">untrustedWithdrawReward</span><span class="p">(</span><span class="kt">address</span> <span class="n">recipient</span><span class="p">)</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="kt">uint256</span> <span class="n">amountToWithdraw</span> <span class="o">=</span> <span class="n">rewardsForA</span><span class="p">[</span><span class="n">recipient</span><span class="p">];</span>
    <span class="n">rewardsForA</span><span class="p">[</span><span class="n">recipient</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nf">require</span><span class="p">(</span><span class="n">recipient</span><span class="p">.</span><span class="nf">call</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="n">amountToWithdraw</span><span class="p">)());</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="n">untrustedGetFirstWithdrawalBonus</span><span class="p">(</span><span class="kt">address</span> <span class="n">recipient</span><span class="p">)</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="nf">require</span><span class="p">(</span><span class="o">!</span><span class="n">claimedBonus</span><span class="p">[</span><span class="n">recipient</span><span class="p">]);</span> <span class="c1">// Each recipient should only be able to claim the bonus once</span>

    <span class="n">claimedBonus</span><span class="p">[</span><span class="n">recipient</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="n">rewardsForA</span><span class="p">[</span><span class="n">recipient</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">100</span><span class="p">;</span>
    <span class="n">untrustedWithdrawReward</span><span class="p">(</span><span class="n">recipient</span><span class="p">);</span> <span class="c1">// claimedBonus has been set to true, so reentry is impossible</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In addition to the fix making reentry impossible, <a class="reference external" href="https://doc.vechainworld.io/page/recommendations#section-mark-untrusted-contracts">untrusted functions have been marked</a>. This same pattern repeats at every level: since <code class="docutils literal notranslate"><span class="pre">untrustedGetFirstWithdrawalBonus()</span></code> calls <code class="docutils literal notranslate"><span class="pre">untrustedWithdrawReward()</span></code>, which calls an external contract, you must also treat <code class="docutils literal notranslate"><span class="pre">untrustedGetFirstWithdrawalBonus()</span></code> as insecure.</p>
<p>Another solution often suggested is a <a class="reference external" href="https://en.wikipedia.org/wiki/Mutual_exclusion">mutex</a>. This allows you to “lock” some state so it can only be changed by the owner of the lock. A simple example might look like this:</p>
<div class="highlight-sol notranslate"><div class="highlight"><pre><span></span><span class="c1">// Note: This is a rudimentary example, and mutexes are particularly useful where there is substantial logic and/or shared state</span>
<span class="kd">mapping</span> <span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="kt">uint256</span><span class="p">)</span> <span class="kr">private</span> <span class="n">balances</span><span class="p">;</span>
<span class="kt">bool</span> <span class="kr">private</span> <span class="n">lockBalances</span><span class="p">;</span>

<span class="kd">function</span> <span class="n">deposit</span><span class="p">()</span> <span class="kr">public</span> <span class="kr">payable</span> <span class="p">{</span>
    <span class="nf">require</span><span class="p">(</span><span class="o">!</span><span class="n">lockBalances</span><span class="p">);</span>
    <span class="n">lockBalances</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="n">balances</span><span class="p">[</span><span class="nb">msg.sender</span><span class="p">]</span> <span class="o">+=</span> <span class="nb">msg.value</span><span class="p">;</span>
    <span class="n">lockBalances</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="n">withdraw</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">amount</span><span class="p">)</span> <span class="kr">public</span> <span class="kr">payable</span> <span class="p">{</span>
    <span class="nf">require</span><span class="p">(</span><span class="o">!</span><span class="n">lockBalances</span> <span class="o">&amp;&amp;</span> <span class="n">amount</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">balances</span><span class="p">[</span><span class="nb">msg.sender</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">amount</span><span class="p">);</span>
    <span class="n">lockBalances</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">msg.sender</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="n">amount</span><span class="p">)())</span> <span class="p">{</span> <span class="c1">// Normally insecure, but the mutex saves it</span>
      <span class="n">balances</span><span class="p">[</span><span class="nb">msg.sender</span><span class="p">]</span> <span class="o">-=</span> <span class="n">amount</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">lockBalances</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If the user tries to call <code class="docutils literal notranslate"><span class="pre">withdraw()</span></code> again before the first call finishes, the lock will prevent it from having any effect. This can be an effective pattern, but it gets tricky when you have multiple contracts that need to cooperate. The following is insecure:</p>
<div class="highlight-sol notranslate"><div class="highlight"><pre><span></span><span class="c1">// INSECURE</span>
<span class="kd">contract</span> <span class="n">StateHolder</span> <span class="p">{</span>
    <span class="kt">uint256</span> <span class="kr">private</span> <span class="n">n</span><span class="p">;</span>
    <span class="kt">address</span> <span class="kr">private</span> <span class="n">lockHolder</span><span class="p">;</span>

    <span class="kd">function</span> <span class="n">getLock</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
        <span class="nf">require</span><span class="p">(</span><span class="n">lockHolder</span> <span class="o">==</span> <span class="kt">address</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
        <span class="n">lockHolder</span> <span class="o">=</span> <span class="nb">msg.sender</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="n">releaseLock</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
        <span class="nf">require</span><span class="p">(</span><span class="nb">msg.sender</span> <span class="o">==</span> <span class="n">lockHolder</span><span class="p">);</span>
        <span class="n">lockHolder</span> <span class="o">=</span> <span class="kt">address</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="n">set</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">newState</span><span class="p">)</span> <span class="kr">public</span> <span class="p">{</span>
        <span class="nf">require</span><span class="p">(</span><span class="nb">msg.sender</span> <span class="o">==</span> <span class="n">lockHolder</span><span class="p">);</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">newState</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>An attacker can call <code class="docutils literal notranslate"><span class="pre">getLock()</span></code>, and then never call <code class="docutils literal notranslate"><span class="pre">releaseLock()</span></code>. If they do this, then the contract will be locked forever, and no further changes will be able to be made. If you use mutexes to protect against reentrancy, you will need to carefully ensure that there are no ways for a lock to be claimed and never released. (There are other potential dangers when programming with mutexes, such as deadlocks and livelocks. You should consult the large amount of literature already written on mutexes, if you decide to go this route.)</p>
</div>
<hr class="docutils" />
<div class="section" id="front-running-aka-transaction-ordering-dependence">
<h2>Front-Running (AKA Transaction-Ordering Dependence)<a class="headerlink" href="#front-running-aka-transaction-ordering-dependence" title="Permalink to this headline">¶</a></h2>
<p>Above were examples of reentrancy involving the attacker executing malicious code <em>within a single transaction</em>. The following are a different type of attack inherent to Blockchains: the fact that <em>the order of transactions themselves</em> (e.g. within a block) is easily subject to manipulation.</p>
<p>Since a transaction is in the mempool for a short while, one can know what actions will occur before it is included in a block. This can be troublesome for things like decentralized markets, where a transaction to buy some tokens can be seen, and a market order implemented before the other transaction gets included. Protecting against this is difficult, as it would come down to the specific contract itself. For example, in markets, it would be better to implement batch auctions (this also protects against high frequency trading concerns). Another way to use a pre-commit scheme (“I’m going to submit the details later”).</p>
</div>
<hr class="docutils" />
<div class="section" id="timestamp-dependence">
<h2>Timestamp Dependence<a class="headerlink" href="#timestamp-dependence" title="Permalink to this headline">¶</a></h2>
<p>Be aware that the timestamp of the block can be manipulated by the miner, and all direct and indirect uses of the timestamp should be considered.</p>
<blockquote>
<div><strong>Note</strong>: See the <a class="reference external" href="https://doc.vechainworld.io/page/recommendations#section-timestamp-dependence">Recommendations</a> section for design considerations related to Timestamp Dependence.</div></blockquote>
</div>
<hr class="docutils" />
<div class="section" id="integer-overflow-and-underflow">
<h2>Integer Overflow and Underflow<a class="headerlink" href="#integer-overflow-and-underflow" title="Permalink to this headline">¶</a></h2>
<p>Consider a simple token transfer:</p>
<div class="highlight-sol notranslate"><div class="highlight"><pre><span></span><span class="kd">mapping</span> <span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="kt">uint256</span><span class="p">)</span> <span class="kr">public</span> <span class="n">balanceOf</span><span class="p">;</span>

<span class="c1">// INSECURE</span>
<span class="kd">function</span> <span class="nf">transfer</span><span class="p">(</span><span class="kt">address</span> <span class="n">_to</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">_value</span><span class="p">)</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="cm">/* Check if sender has balance */</span>
    <span class="nf">require</span><span class="p">(</span><span class="n">balanceOf</span><span class="p">[</span><span class="nb">msg.sender</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">_value</span><span class="p">);</span>
    <span class="cm">/* Add and subtract new balances */</span>
    <span class="n">balanceOf</span><span class="p">[</span><span class="nb">msg.sender</span><span class="p">]</span> <span class="o">-=</span> <span class="n">_value</span><span class="p">;</span>
    <span class="n">balanceOf</span><span class="p">[</span><span class="n">_to</span><span class="p">]</span> <span class="o">+=</span> <span class="n">_value</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// SECURE</span>
<span class="kd">function</span> <span class="nf">transfer</span><span class="p">(</span><span class="kt">address</span> <span class="n">_to</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">_value</span><span class="p">)</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="cm">/* Check if sender has balance and for overflows */</span>
    <span class="nf">require</span><span class="p">(</span><span class="n">balanceOf</span><span class="p">[</span><span class="nb">msg.sender</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">_value</span> <span class="o">&amp;&amp;</span> <span class="n">balanceOf</span><span class="p">[</span><span class="n">_to</span><span class="p">]</span> <span class="o">+</span> <span class="n">_value</span> <span class="o">&gt;=</span> <span class="n">balanceOf</span><span class="p">[</span><span class="n">_to</span><span class="p">]);</span>

    <span class="cm">/* Add and subtract new balances */</span>
    <span class="n">balanceOf</span><span class="p">[</span><span class="nb">msg.sender</span><span class="p">]</span> <span class="o">-=</span> <span class="n">_value</span><span class="p">;</span>
    <span class="n">balanceOf</span><span class="p">[</span><span class="n">_to</span><span class="p">]</span> <span class="o">+=</span> <span class="n">_value</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If a balance reaches the <em>maximum uint256 value (2^256)</em> it will circle back to zero which checks for the condition. This may or may not be relevant, depending on the implementation. Think about whether or not the <code class="docutils literal notranslate"><span class="pre">uint</span></code> value has an opportunity to approach such a large number. Think about how the <code class="docutils literal notranslate"><span class="pre">uint</span></code> variable changes state, and who has authority to make such changes. If any user can call functions which update the <code class="docutils literal notranslate"><span class="pre">uint</span></code> value, it’s more vulnerable to attack. If only an admin has access to change the variable’s state, you might be safe. If a user can increment by only 1 at a time, you are probably also safe because there is no feasible way to reach this limit.</p>
<p>The same is true for underflow. If a uint256 is made to be less than zero, it will cause an underflow and get set to its maximum value.</p>
<p>Be careful with the smaller data-types like uint8, uint16, uint24…etc: they can even more easily hit their maximum value.</p>
<blockquote>
<div><strong>Warning</strong>: Be aware there are around <a class="reference external" href="https://github.com/ethereum/solidity/issues/796#issuecomment-253578925">20 cases for overflow and underflow</a>.</div></blockquote>
<p>One simple solution to mitigate the common mistakes for overflow and underflow is to use <code class="docutils literal notranslate"><span class="pre">SafeMath.sol</span></code> <a class="reference external" href="https://github.com/OpenZeppelin/openzeppelin-solidity/blob/master/contracts/math/SafeMath.sol">library</a> for arithmetic functions.</p>
<div class="section" id="underflow-in-depth-storage-manipulation">
<h3>Underflow in Depth: Storage Manipulation<a class="headerlink" href="#underflow-in-depth-storage-manipulation" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://github.com/Arachnid/uscc/tree/master/submissions-2017/doughoyte">Doug Hoyte’s submission</a> to the 2017 underhanded solidity contest received <a class="reference external" href="http://u.solidity.cc/">an honorable mention</a>. The entry is interesting, because it raises the concerns about how C-like underflow might affect Solidity storage. Here is a simplified version:</p>
<div class="highlight-sol notranslate"><div class="highlight"><pre><span></span><span class="kd">contract</span> <span class="n">UnderflowManipulation</span> <span class="p">{</span>
    <span class="kt">address</span> <span class="kr">public</span> <span class="n">owner</span><span class="p">;</span>
    <span class="kt">uint256</span> <span class="kr">public</span> <span class="n">manipulateMe</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

    <span class="kd">constructor</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
        <span class="n">owner</span> <span class="o">=</span> <span class="nb">msg.sender</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">uint256</span><span class="p">[]</span> <span class="kr">public</span> <span class="n">bonusCodes</span><span class="p">;</span>

    <span class="kd">function</span> <span class="n">pushBonusCode</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">code</span><span class="p">)</span> <span class="kr">public</span> <span class="p">{</span>
        <span class="n">bonusCodes</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="n">code</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="n">popBonusCode</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
        <span class="nf">require</span><span class="p">(</span><span class="n">bonusCodes</span><span class="p">.</span><span class="n">length</span> <span class="o">&gt;=</span><span class="mi">0</span><span class="p">);</span>  <span class="c1">// this is a tautology</span>
        <span class="n">bonusCodes</span><span class="p">.</span><span class="n">length</span><span class="o">--</span><span class="p">;</span> <span class="c1">// an underflow can be caused here</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="n">modifyBonusCode</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">index</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">update</span><span class="p">)</span> <span class="kr">public</span> <span class="p">{</span>
        <span class="nf">require</span><span class="p">(</span><span class="n">index</span> <span class="o">&lt;</span> <span class="n">bonusCodes</span><span class="p">.</span><span class="n">length</span><span class="p">);</span>
        <span class="n">bonusCodes</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">update</span><span class="p">;</span> <span class="c1">// write to any index less than bonusCodes.length</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>In general, the variable <code class="docutils literal notranslate"><span class="pre">manipulateMe</span></code>’s location cannot be influenced without going through the <code class="docutils literal notranslate"><span class="pre">keccak256</span></code>, which is infeasible. However, since dynamic arrays are stored sequentially, if a malicious actor wanted to change <code class="docutils literal notranslate"><span class="pre">manipulateMe</span></code> all they would need to do is:</p>
<ul class="simple">
<li>Call <code class="docutils literal notranslate"><span class="pre">popBonusCode</span></code> to underflow (Note: <code class="docutils literal notranslate"><span class="pre">array.pop()</span></code> method <a class="reference external" href="https://github.com/ethereum/solidity/blob/v0.5.0/Changelog">was added</a> in Solidity 0.5.0)</li>
<li>Compute the storage location of <code class="docutils literal notranslate"><span class="pre">manipulateMe</span></code></li>
<li>Modify and update <code class="docutils literal notranslate"><span class="pre">manipulateMe</span></code>’s value using <code class="docutils literal notranslate"><span class="pre">modifyBonusCode</span></code></li>
</ul>
<blockquote>
<div><strong>Note</strong>: In practice, this array would be immediately pointed out as fishy, but buried under more complex smart contract architecture, it can arbitrarily allow malicious changes to constant variables, such as total supply of a token.</div></blockquote>
<p>When considering use of a dynamic array, a container data scructure is a good practice. The Solidity CRUD <a class="reference external" href="https://medium.com/&#64;robhitchens/solidity-crud-part-1-824ffa69509a">part 1</a> and <a class="reference external" href="https://medium.com/&#64;robhitchens/solidity-crud-part-2-ed8d8b4f74ec">part 2</a> articles are good resources.</p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="dos-with-unexpected-revert">
<h2>DoS with (Unexpected) revert<a class="headerlink" href="#dos-with-unexpected-revert" title="Permalink to this headline">¶</a></h2>
<p>Consider a simple auction contract:</p>
<div class="highlight-sol notranslate"><div class="highlight"><pre><span></span><span class="c1">// INSECURE</span>
<span class="kd">contract</span> <span class="n">Auction</span> <span class="p">{</span>
    <span class="kt">address</span> <span class="n">currentLeader</span><span class="p">;</span>
    <span class="kt">uint256</span> <span class="n">highestBid</span><span class="p">;</span>

    <span class="kd">function</span> <span class="n">bid</span><span class="p">()</span> <span class="kr">public</span> <span class="kr">payable</span> <span class="p">{</span>
        <span class="nf">require</span><span class="p">(</span><span class="nb">msg.value</span> <span class="o">&gt;</span> <span class="n">highestBid</span><span class="p">);</span>

        <span class="nf">require</span><span class="p">(</span><span class="n">currentLeader</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="n">highestBid</span><span class="p">));</span> <span class="c1">// Refund the old leader, if it fails then revert</span>

        <span class="n">currentLeader</span> <span class="o">=</span> <span class="nb">msg.sender</span><span class="p">;</span>
        <span class="n">highestBid</span> <span class="o">=</span> <span class="nb">msg.value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If attacker bids using a smart contract which has a fallback function that reverts any payment, the attacker can win any auction. When it tries to refund the old leader, it reverts if the refund fails. This means that a malicious bidder can become the leader while making sure that any refunds to their address will <em>always</em> fail. In this way, they can prevent anyone else from calling the <code class="docutils literal notranslate"><span class="pre">bid()</span></code> function, and stay the leader forever. A recommendation is to set up a <a class="reference external" href="https://doc.vechainworld.io/page/recommendations#section-favor-pull-over-push-for-external-calls">pull payment system</a> instead, as described earlier.</p>
<p>Another example is when a contract may iterate through an array to pay users (e.g., supporters in a crowdfunding contract). It’s common to want to make sure that each payment succeeds. If not, one should revert. The issue is that if one call fails, you are reverting the whole payout system, meaning the loop will never complete. No one gets paid because one address is forcing an error.</p>
<div class="highlight-sol notranslate"><div class="highlight"><pre><span></span><span class="kt">address</span><span class="p">[]</span> <span class="kr">private</span> <span class="n">refundAddresses</span><span class="p">;</span>
<span class="kd">mapping</span> <span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="kt">uint256</span><span class="p">)</span> <span class="kr">public</span> <span class="n">refunds</span><span class="p">;</span>

<span class="c1">// bad</span>
<span class="kd">function</span> <span class="n">refundAll</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="c1">// arbitrary length iteration based on how many addresses participated</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">refundAddresses</span><span class="p">.</span><span class="n">length</span><span class="p">;</span> <span class="n">x</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// doubly bad, now a single failure on send will hold up all funds</span>
        <span class="nf">require</span><span class="p">(</span><span class="n">refundAddresses</span><span class="p">[</span><span class="n">x</span><span class="p">].</span><span class="nf">send</span><span class="p">(</span><span class="n">refunds</span><span class="p">[</span><span class="n">refundAddresses</span><span class="p">[</span><span class="n">x</span><span class="p">]]))</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Again, the recommended solution is to <a class="reference external" href="https://doc.vechainworld.io/page/recommendations#section-favor-pull-over-push-for-external-calls">favor pull over push payments</a>.</p>
</div>
<hr class="docutils" />
<div class="section" id="dos-with-block-gas-limit">
<h2>DoS with Block Gas Limit<a class="headerlink" href="#dos-with-block-gas-limit" title="Permalink to this headline">¶</a></h2>
<p>Each block has an upper bound on the amount of gas that can be spent, and thus the amount computation that can be done. This is the Block Gas Limit. If the gas spent exceeds this limit, the transaction will fail. This leads to a couple possible Denial of Service vectors:</p>
<div class="section" id="gas-limit-dos-on-a-contract-via-unbounded-operations">
<h3>Gas Limit DoS on a Contract via Unbounded Operations<a class="headerlink" href="#gas-limit-dos-on-a-contract-via-unbounded-operations" title="Permalink to this headline">¶</a></h3>
<p>You may have noticed another problem with the previous example: by paying out to everyone at once, you risk running into the block gas limit.</p>
<p>This can lead to problems even in the absence of an intentional attack. However, it’s especially bad if an attacker can manipulate the amount of gas needed. In the case of the previous example, the attacker could add a bunch of addresses, each of which needs to get a very small refund. The gas cost of refunding each of the attacker’s addresses could, therefore, end up being more than the gas limit, blocking the refund transaction from happening at all.</p>
<p>This is another reason to <a class="reference external" href="https://doc.vechainworld.io/page/recommendations#section-favor-pull-over-push-for-external-calls">favor pull over push payments</a>.</p>
<p>If you absolutely must loop over an array of unknown size, then you should plan for it to potentially take multiple blocks, and therefore require multiple transactions. You will need to keep track of how far you’ve gone, and be able to resume from that point, as in the following example:</p>
<div class="highlight-sol notranslate"><div class="highlight"><pre><span></span><span class="kd">struct</span> <span class="n">Payee</span> <span class="p">{</span>
    <span class="kt">address</span> <span class="n">addr</span><span class="p">;</span>
    <span class="kt">uint256</span> <span class="n">value</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">Payee</span><span class="p">[]</span> <span class="n">payees</span><span class="p">;</span>
<span class="kt">uint256</span> <span class="n">nextPayeeIndex</span><span class="p">;</span>

<span class="kd">function</span> <span class="n">payOut</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="kt">uint256</span> <span class="n">i</span> <span class="o">=</span> <span class="n">nextPayeeIndex</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">payees</span><span class="p">.</span><span class="n">length</span> <span class="o">&amp;&amp;</span> <span class="nb">msg.gas</span> <span class="o">&gt;</span> <span class="mi">200000</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">payees</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">addr</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="n">payees</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">value</span><span class="p">);</span>
      <span class="n">i</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">nextPayeeIndex</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You will need to make sure that nothing bad will happen if other transactions are processed while waiting for the next iteration of the <code class="docutils literal notranslate"><span class="pre">payOut()</span></code> function. So only use this pattern if absolutely necessary.</p>
</div>
<div class="section" id="gas-limit-dos-on-the-network-via-block-stuffing">
<h3>Gas Limit DoS on the Network via Block Stuffing<a class="headerlink" href="#gas-limit-dos-on-the-network-via-block-stuffing" title="Permalink to this headline">¶</a></h3>
<p>Even if your contract does not contain an unbounded loop, an attacker can prevent other transactions from being included in the blockchain for several blocks by placing computationally intensive transactions with a high enough gas price.</p>
<p>To do this, the attacker can issue several transactions which will consume the entire gas limit, with a high enough gas price to be included as soon as the next block is mined. No gas price can guarantee inclusion in the block, but the higher the price is, the higher is the chance.</p>
<p>If the attack succeeds, no other transactions will be included in the block. Sometimes, an attacker’s goal is to block transactions to a specific contract prior to specific time.</p>
<p>This attack <a class="reference external" href="https://osolmaz.com/2018/10/18/anatomy-block-stuffing">was conducted</a> on Fomo3D, a gambling app. The app was designed to reward the last address that purchased a “key”. Each key purchase extended the timer, and the game ended once the timer went to 0. The attacker bought a key and then stuffed 13 blocks in a row until the timer was triggered and the payout was released. Transactions sent by attacker took 7.9 million gas on each block, so the gas limit allowed a few small “send” transactions (which take 21,000 gas each), but disallowed any calls to the <code class="docutils literal notranslate"><span class="pre">buyKey()</span></code> function (which costs 300,000+ gas).</p>
<p>A Block Stuffing attack can be used on any contract requiring an action within a certain time period. However, as with any attack, it is only profitable when the expected reward exceeds its cost. Cost of this attack is directly proportional to the number of blocks which need to be stuffed. If a large payout can be obtained by preventing actions from other participants, your contract will likely be targeted by such an attack.</p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="forcibly-sending-vet-to-a-contract">
<h2>Forcibly Sending VET to a Contract<a class="headerlink" href="#forcibly-sending-vet-to-a-contract" title="Permalink to this headline">¶</a></h2>
<p>It is possible to forcibly send VET to a contract without triggering its fallback function. This is an important consideration when placing important logic in the fallback function or making calculations based on a contract’s balance. Take the following example:</p>
<div class="highlight-sol notranslate"><div class="highlight"><pre><span></span><span class="kd">contract</span> <span class="n">Vulnerable</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="p">()</span> <span class="kr">payable</span> <span class="p">{</span>
        <span class="nf">revert</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="n">somethingBad</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
        <span class="nf">require</span><span class="p">(</span><span class="nb">this</span><span class="p">.</span><span class="nb">balance</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
        <span class="c1">// Do something bad</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Contract logic seems to disallow payments to the contract and therefore disallow “something bad” from happening. However, a few methods exist for forcibly sending VET to the contract and therefore making its balance greater than zero.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">selfdestruct</span></code> contract method allows a user to specify a beneficiary to send any excess VET. <code class="docutils literal notranslate"><span class="pre">selfdestruct</span></code> <a class="reference external" href="https://solidity.readthedocs.io/en/develop/security-considerations.html#sending-and-receiving-ether">does not trigger a contract’s fallback function</a>.</p>
<blockquote>
<div><strong>Warning</strong>: It is also possible to <a class="reference external" href="https://github.com/Arachnid/uscc/tree/master/submissions-2017/ricmoo">precompute</a> a contract’s address and send VET to that address before deploying the contract.</div></blockquote>
<hr class="docutils" />
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="resources.html" class="btn btn-neutral float-right" title="Resources" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="design-patterns.html" class="btn btn-neutral float-left" title="Design Patterns" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, VeChain Developers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>