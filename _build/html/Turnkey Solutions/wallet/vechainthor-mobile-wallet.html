

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>title: “The VeChainThor Wallet - iOS” slug: “vechainthor-mobile-wallet” hidden: false createdAt: “2019-04-04T03:27:16.303Z” updatedAt: “2019-08-15T05:39:35.526Z” &mdash; VeChain Documentation Legacy 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> VeChain Documentation Legacy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ch1/index.html">VeChainThor Blockchain</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../ch1/overview.html">What is VeChainThor?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ch1/overview.html#business-friendly-meta-transaction-features">Business Friendly Meta-transaction Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch1/overview.html#proof-of-authority-poa">Proof of Authority (“PoA”)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch1/overview.html#governance">Governance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch1/overview.html#economic-model">Economic Model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ch1/two.html">Two-token design</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ch1/two.html#vet">VET</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch1/two.html#vtho">VTHO</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ch1/block.html">Block</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ch1/tx-model.html">Transaction Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ch1/mpp.html">Multi-party Payment Protocol (MPP)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ch1/mpp.html#functions-related-to-user">Functions related to <em>User</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch1/mpp.html#functions-related-to-the-credit-plan">Functions related to the <em>credit plan</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch1/mpp.html#functions-related-master">Functions related <em>Master</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch1/mpp.html#functions-related-to-sponsor">Functions related to <em>Sponsor</em></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ch1/poa.html">Proof of Authority (PoA)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ch1/poa.html#when">When</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch1/poa.html#who">Who</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch1/poa.html#am-status-updating">AM Status Updating</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch1/poa.html#trunk">Trunk</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ch1/built-in.html">Built-in Smart Contracts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ch2/index.html">Get Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../ch2/how-to-node.html">How to deploy a VeChainThor node</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ch2/docker.html">Docker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../ch2/docker.html#run-vechainthor-authority-masternode-in-docker">Run VeChainThor Authority Masternode in docker</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ch2/docker.html#run-node-in-docker">Run node in docker</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../ch2/aws.html">AWS Marketplace</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../ch2/aws.html#this-is-an-example-of-solo-node-deployment">This is an example of “solo node” deployment.</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../ch2/source.html">Source code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../ch2/source.html#installation">Installation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ch2/public.html">Public VeChainThor nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ch2/how-to-deploy.html">How to deploy a smart contract</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ch2/how-to-deploy.html#quick-start">Quick Start</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ch2/how-to-develop.html">How to develop a dApp</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ch2/how-to-1.html">Intro</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../ch2/how-to-1.html#whats-web-application"><strong>What’s Web Application?</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ch2/how-to-1.html#what-is-dapp"><strong>What is DApp?</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ch2/how-to-1.html#write-a-dapp-sync-and-connex"><strong>Write a DApp: Sync and Connex</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ch2/how-to-1.html#token-transfer-a-simple-dapp-in-javascript"><strong>Token Transfer: A Simple DApp in Javascript</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../ch2/how-to-2.html">Components and Coding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../ch2/how-to-2.html#preparation"><strong>Preparation</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ch2/how-to-2.html#setup-in-3-minutes"><strong>Setup in 3 minutes</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ch2/how-to-2.html#coding"><strong>Coding</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ch2/how-to-2.html#put-things-together"><strong>Put Things Together</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ch2/how-to-2.html#test-the-app"><strong>Test the App</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ch2/how-to-2.html#one-more-thing"><strong>One More Thing</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../ch2/how-to-3.html">Setup &amp; Walk Around</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../ch2/how-to-3.html#setup-in-3-minutes"><strong>Setup in 3 minutes</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ch2/how-to-3.html#poke-around-familiar-with-sync"><strong>Poke around: Familiar with Sync</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ch2/how-to-3.html#play-with-connex-js-apis"><strong>Play with Connex.js APIs</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ch2/how-to-3.html#summary"><strong>Summary</strong></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VeChain Documentation Legacy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>title: “The VeChainThor Wallet - iOS”
slug: “vechainthor-mobile-wallet”
hidden: false
createdAt: “2019-04-04T03:27:16.303Z”
updatedAt: “2019-08-15T05:39:35.526Z”</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/Turnkey Solutions/wallet/vechainthor-mobile-wallet.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <hr class="docutils" />
<div class="section" id="title-the-vechainthor-wallet-ios-slug-vechainthor-mobile-wallet-hidden-false-createdat-2019-04-04t03-27-16-303z-updatedat-2019-08-15t05-39-35-526z">
<h1>title: “The VeChainThor Wallet - iOS”
slug: “vechainthor-mobile-wallet”
hidden: false
createdAt: “2019-04-04T03:27:16.303Z”
updatedAt: “2019-08-15T05:39:35.526Z”<a class="headerlink" href="#title-the-vechainthor-wallet-ios-slug-vechainthor-mobile-wallet-hidden-false-createdat-2019-04-04t03-27-16-303z-updatedat-2019-08-15t05-39-35-526z" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="get-started">
<h1>Get Started<a class="headerlink" href="#get-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="requires-ios-10">
<h2>Requires iOS 10<a class="headerlink" href="#requires-ios-10" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="latest-version-1-0-0">
<h2>Latest version 1.0.0<a class="headerlink" href="#latest-version-1-0-0" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="support-installation-with-cocoapods">
<h2>Support installation with CocoaPods<a class="headerlink" href="#support-installation-with-cocoapods" title="Permalink to this headline">¶</a></h2>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span>   pod &#39;ThorWalletSDK&#39;, &#39;~&gt;  1.0.0&#39;
</pre></div>
</div>
</div>
<div class="section" id="set-up-the-node-environment-test-node-environment-main-node-environment-and-custom-node-environment">
<h2>Set up the node environment. (<code class="docutils literal notranslate"><span class="pre">Test_Node</span> <span class="pre">environment</span></code> , <code class="docutils literal notranslate"><span class="pre">Main_Node</span> <span class="pre">environment</span></code> and custom node environment)<a class="headerlink" href="#set-up-the-node-environment-test-node-environment-main-node-environment-and-custom-node-environment" title="Permalink to this headline">¶</a></h2>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#import &quot;WalletUtils.h&quot;</span>
</pre></div>
</div>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="bp">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions:</span><span class="p">(</span><span class="bp">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span>
<span class="p">{</span>
    <span class="c1">// Override point for customization after application launch.</span>
    
   <span class="c1">//Set it as a main net environment</span>
    <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">setNodeUrl</span><span class="p">:</span><span class="n">Main_Node</span><span class="p">];</span>
    
    <span class="c1">//Or if you have a custom node url, you can change it to your own node url:</span>
    <span class="c1">//[WalletUtils setNodeUrl:@&quot;https://www.yourCustomNodeUrl.com&quot;]; //your custom node Url</span>
    
    <span class="c1">//Set it as a test net environment:</span>
    <span class="c1">//[WalletUtils setNodeUrl:Test_Node];</span>
    
    <span class="c1">//If nodeUrl is not set, the default value is main net</span>
    
    <span class="p">...</span>
    
    <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="how-to-run-simple-demo">
<h2>How to run simple demo<a class="headerlink" href="#how-to-run-simple-demo" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Double click on the ThorWalletSDK.xcworkspace</li>
<li>command + R,</li>
<li>run</li>
</ul>
</div>
</div>
<div class="section" id="api-reference">
<h1>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h1>
<p>The wallet function is implemented by calling class: WalletUtils</p>
<div class="section" id="sdk-initialization">
<h2>SDK initialization<a class="headerlink" href="#sdk-initialization" title="Permalink to this headline">¶</a></h2>
<p>SDK initialization
Inherit the AppDelegate class and implement the following methods:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="bp">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions:</span><span class="p">(</span><span class="bp">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span>
<span class="p">{</span>
    <span class="c1">// Override point for customization after application launch.</span>
    
    <span class="c1">//Set it as a main net environment</span>
    <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">setNodeUrl</span><span class="p">:</span><span class="n">Main_Node</span><span class="p">];</span>
    
    <span class="c1">//Or if you have a corresponding node url, you can change it to your own node url:</span>
    <span class="c1">//[WalletUtils setNodeUrl:@&quot;https://www.yourCustomUrl.com&quot;]; //your custom node url</span>
    
    <span class="c1">//Switching test net url:</span>
    <span class="c1">//[WalletUtils setNodeUrl:Test_Node];</span>
    
    <span class="c1">//If nodeUrl is not set, the default value is main net</span>
    
    <span class="p">...</span>
    
    <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="set-node-url">
<h2>Set node url<a class="headerlink" href="#set-node-url" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Node: Any form of server in a block chain network.</p>
<p>Node url: Unified resource location address for participating block chain servers.</p>
</div></blockquote>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  @param nodelUrl : node url</span>
<span class="cm"> */</span> 
<span class="p">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setNodeUrl:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">nodelUrl</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span> <span class="c1">//Set it as a main net environment</span>
 <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">setNodeUrl</span><span class="p">:</span><span class="n">Main_Node</span><span class="p">];</span>

 <span class="c1">//Or if you have a corresponding node url, you can change it to your own node url:</span>
 <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">setNodeUrl</span><span class="p">:</span><span class="s">@&quot;https://www.yourCustomUrl.com&quot;</span><span class="p">];</span> <span class="c1">//your custom node Url</span>
            
 <span class="c1">//Switching test net url:</span>
 <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">setNodeUrl</span><span class="p">:</span><span class="n">Test_Node</span><span class="p">];</span>

 <span class="c1">//If nodeUrl is not set, the default value is main net</span>
 
</pre></div>
</div>
</div>
<div class="section" id="get-node-url">
<h2>Get node url<a class="headerlink" href="#get-node-url" title="Permalink to this headline">¶</a></h2>
<div class="section" id="if-nodeurl-is-not-set-the-default-value-is-main-node">
<h3>If nodeUrl is not set, the default value is Main_Node.<a class="headerlink" href="#if-nodeurl-is-not-set-the-default-value-is-main-node" title="Permalink to this headline">¶</a></h3>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="p">+</span> <span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">getNodeUrl</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span> <span class="bp">NSString</span> <span class="o">*</span><span class="n">nodeUrl</span> <span class="o">=</span> <span class="p">[</span><span class="n">WalletUtils</span> <span class="n">getNodeUrl</span><span class="p">];</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="create-wallet">
<h2>Create wallet<a class="headerlink" href="#create-wallet" title="Permalink to this headline">¶</a></h2>
<p>After entering the wallet password, the user can create the wallet through the following methods:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  @param password : Wallet password</span>
<span class="cm"> *  @param callback : Callback after the end;The attributes of a class has mnemonicPhras , address, privateKey, keystore</span>
<span class="cm"> */</span>
<span class="p">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">createWalletWithPassword:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">password</span>  
                        <span class="nf">callback:</span><span class="p">(</span><span class="kt">void</span><span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="n">WalletAccountModel</span> <span class="o">*</span><span class="n">account</span><span class="p">,</span><span class="bp">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">))</span><span class="nv">callback</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span> <span class="c1">//Create a wallet with your password.</span>
 <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">createWalletWithPassword</span><span class="p">:</span><span class="n">password</span>
                              <span class="nl">callback</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">WalletAccountModel</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">account</span><span class="p">,</span> <span class="bp">NSError</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">error</span><span class="p">)</span>

 <span class="p">{</span>
       <span class="k">if</span><span class="p">(</span><span class="n">error</span> <span class="o">==</span> <span class="nb">nil</span><span class="p">){</span>
    
            <span class="bp">NSString</span> <span class="o">*</span><span class="n">mnemonic</span> <span class="o">=</span> <span class="p">[</span><span class="n">account</span><span class="p">.</span><span class="n">words</span> <span class="nl">componentsJoinedByString</span><span class="p">:</span><span class="s">@&quot; &quot;</span><span class="p">];</span>
            <span class="bp">NSString</span> <span class="o">*</span><span class="n">address</span> <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="n">address</span><span class="p">;</span>
            <span class="bp">NSString</span> <span class="o">*</span><span class="n">privateKey</span> <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="n">privatekey</span><span class="p">;</span>
            <span class="bp">NSString</span> <span class="o">*</span><span class="n">keystore</span> <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="n">keystore</span><span class="p">;</span>
        
             <span class="c1">//Keystore is saved in files or databases</span>
             
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="c1">//fail</span>
        <span class="p">}</span>
 <span class="p">}];</span>
    
</pre></div>
</div>
</div>
<div class="section" id="create-wallet-with-mnemonic-words">
<h2>Create wallet with mnemonic words<a class="headerlink" href="#create-wallet-with-mnemonic-words" title="Permalink to this headline">¶</a></h2>
<p>When the user has mnemonic words, enter the mnemonic words and the password of the keystore of the wallet to import the wallet. The method of using the mnemonic words as follows:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  @param mnemonicWords :Mnemonic Words</span>
<span class="cm"> *  @param password : Wallet password</span>
<span class="cm"> *  @param callback : Callback after the end;The attributes of a class has mnemonicPhras , address, privateKey, keystore</span>
<span class="cm"> */</span>
<span class="p">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">createWalletWithMnemonicWords:</span><span class="p">(</span><span class="bp">NSArray</span><span class="o">&lt;</span><span class="bp">NSString</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="p">)</span><span class="nv">mnemonicWords</span>
                            <span class="nf">password:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">password</span>
                            <span class="nf">callback:</span><span class="p">(</span><span class="kt">void</span><span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="n">WalletAccountModel</span> <span class="o">*</span><span class="n">account</span><span class="p">,</span><span class="bp">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">))</span><span class="nv">callback</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span> <span class="c1">// Create a wallet with your password and mnemonic words.</span>
 <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">createWalletWithMnemonicWords</span><span class="p">:</span><span class="n">mnemonicWords</span>
                                   <span class="nl">password</span><span class="p">:</span><span class="nb">self</span><span class="p">.</span><span class="n">password</span><span class="p">.</span><span class="n">text</span>
                                   <span class="nl">callback</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">WalletAccountModel</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">account</span><span class="p">,</span> <span class="bp">NSError</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">error</span><span class="p">)</span>
 <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">error</span> <span class="o">==</span> <span class="nb">nil</span><span class="p">){</span>
            
            <span class="bp">NSString</span> <span class="o">*</span><span class="n">address</span> <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="n">address</span><span class="p">;</span>
            <span class="bp">NSString</span> <span class="o">*</span><span class="n">privateKey</span> <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="n">privatekey</span><span class="p">;</span>
            <span class="bp">NSString</span> <span class="o">*</span><span class="n">keystore</span> <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="n">keystore</span><span class="p">;</span>

            <span class="c1">//Keystore is saved in files or databases</span>
            
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="c1">//fail</span>
        <span class="p">}</span>
 <span class="p">}];</span>
</pre></div>
</div>
</div>
<div class="section" id="verify-the-mnemonic-words">
<h2>Verify the mnemonic words<a class="headerlink" href="#verify-the-mnemonic-words" title="Permalink to this headline">¶</a></h2>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  @param mnemonicWords : Mnemonic words,Number of mnemonic words : 12, 15, 18, 21 and 24.</span>
<span class="cm"> *  @return result</span>
<span class="cm"> */</span>
<span class="p">+</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isValidMnemonicWords:</span><span class="p">(</span><span class="bp">NSArray</span><span class="o">&lt;</span><span class="bp">NSString</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="p">)</span><span class="nv">mnemonicWords</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span> <span class="bp">NSString</span> <span class="o">*</span><span class="n">mnemonicWords</span> <span class="o">=</span> <span class="s">@&quot;admit mad dream stable scrub rubber cabbage exist maple excuse copper month&quot;</span><span class="p">;</span>
 <span class="kt">BOOL</span> <span class="n">isValid</span> <span class="o">=</span> <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">isValidMnemonicWords</span><span class="p">:[</span><span class="n">mnemonicWords</span> <span class="nl">componentsSeparatedByString</span><span class="p">:</span><span class="s">@&quot; &quot;</span><span class="p">]];</span>
 <span class="c1">// isValid is YES</span>
</pre></div>
</div>
</div>
<div class="section" id="verify-keystore-format">
<h2>Verify keystore format<a class="headerlink" href="#verify-keystore-format" title="Permalink to this headline">¶</a></h2>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  @param keystoreJson :Keystore JSON encryption format for user wallet private key</span>
<span class="cm"> *  @return verification result</span>
<span class="cm"> */</span>
<span class="p">+</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isValidKeystore:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">keystoreJson</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span> <span class="bp">NSString</span> <span class="o">*</span><span class="n">keystore</span> <span class="o">=</span> <span class="s">@&quot;{</span><span class="se">\&quot;</span><span class="s">version</span><span class="se">\&quot;</span><span class="s">:3,</span><span class="se">\&quot;</span><span class="s">id</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">1150C15C-2E20-462B-8A88-EDF8A0E4DB71</span><span class="se">\&quot;</span><span class="s">,</span><span class="se">\n</span><span class="s"> </span><span class="se">\&quot;</span><span class="s">crypto</span><span class="se">\&quot;</span><span class="s">:{</span><span class="se">\&quot;</span><span class="s">ciphertext</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">1cf8d74d31b1ec2568f903fc2c84d215c0401cbb710b7b3de081af1449ae2a89</span><span class="se">\&quot;</span><span class="s">,</span><span class="se">\&quot;</span><span class="s">cipherparams</span><span class="se">\&quot;</span><span class="s">:{</span><span class="se">\&quot;</span><span class="s">iv</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">03ccae46eff93b3d9bdf2b21739d7205</span><span class="se">\&quot;</span><span class="s">},</span><span class="se">\&quot;</span><span class="s">kdf</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">scrypt</span><span class="se">\&quot;</span><span class="s">,</span><span class="se">\&quot;</span><span class="s">kdfparams</span><span class="se">\&quot;</span><span class="s">:{</span><span class="se">\&quot;</span><span class="s">r</span><span class="se">\&quot;</span><span class="s">:8,</span><span class="se">\&quot;</span><span class="s">p</span><span class="se">\&quot;</span><span class="s">:1,</span><span class="se">\&quot;</span><span class="s">n</span><span class="se">\&quot;</span><span class="s">:262144,</span><span class="se">\&quot;</span><span class="s">dklen</span><span class="se">\&quot;</span><span class="s">:32,</span><span class="se">\&quot;</span><span class="s">salt</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">a71ecee9a1c33f0311e46f7da7da8d218a8c5b3d1067716a9bcdb767785d8e83</span><span class="se">\&quot;</span><span class="s">},</span><span class="se">\&quot;</span><span class="s">mac</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">82b20c61854621f35b4d60ffb795655258356f310cdffa587f7db68a1789de75</span><span class="se">\&quot;</span><span class="s">,</span><span class="se">\&quot;</span><span class="s">cipher</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">aes-128-ctr</span><span class="se">\&quot;</span><span class="s">},</span><span class="se">\&quot;</span><span class="s">address</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">cc2b456b2c9399b4b68ef632cf6a1aeabe67b417</span><span class="se">\&quot;</span><span class="s">}&quot;</span><span class="p">;</span>
 <span class="kt">BOOL</span> <span class="n">isValid</span> <span class="o">=</span> <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">isValidKeystore</span><span class="p">:</span><span class="n">keystore</span><span class="p">];</span>
 <span class="c1">// isValid is YES</span>
    
</pre></div>
</div>
</div>
<div class="section" id="verify-the-keystore-with-a-password">
<h2>Verify the keystore with a password<a class="headerlink" href="#verify-the-keystore-with-a-password" title="Permalink to this headline">¶</a></h2>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  @param keystoreJson :  Keystore JSON encryption format for user wallet private key</span>
<span class="cm"> *  @param password :  Wallet password</span>
<span class="cm"> *  @param callback : Callback after the end</span>
<span class="cm"> */</span>
<span class="p">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">verifyKeystore:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">keystoreJson</span>
             <span class="nf">password:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">password</span>
             <span class="nf">callback:</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="kt">BOOL</span> <span class="n">result</span><span class="p">))</span><span class="nv">callback</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="c1">//Verification keystore</span>
<span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">verifyKeystore</span><span class="p">:</span><span class="n">keystore</span> <span class="nl">password</span><span class="p">:</span><span class="n">password</span> <span class="nl">callback</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="kt">BOOL</span> <span class="n">result</span><span class="p">)</span> <span class="p">{</span>
       <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span>
           <span class="c1">//success</span>
           
           <span class="c1">//Keystore is saved in files or databases</span>
       <span class="p">}</span><span class="k">else</span><span class="p">{</span> <span class="c1">//fail</span>
           
       <span class="p">}</span>
 <span class="p">}];</span>
   
</pre></div>
</div>
</div>
<div class="section" id="modify-password-of-keystore">
<h2>Modify password of keystore<a class="headerlink" href="#modify-password-of-keystore" title="Permalink to this headline">¶</a></h2>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  @param oldPassword : old password for wallet.</span>
<span class="cm"> *  @param newPassword : new password for wallet.</span>
<span class="cm"> *  @param keystoreJson :  Keystore JSON encryption format for user wallet private key</span>
<span class="cm"> *  @param callback : Callback after the end</span>
<span class="cm"> */</span>
<span class="p">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">modifyKeystore:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">keystoreJson</span>
          <span class="nf">newPassword:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">newPassword</span>
          <span class="nf">oldPassword:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">oldPassword</span>
             <span class="nf">callback:</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="bp">NSString</span> <span class="o">*</span><span class="n">newKeystore</span><span class="p">))</span><span class="nv">callback</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="c1">//change Password</span>
<span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">modifyKeystore</span><span class="p">:</span><span class="n">keystore</span> 
                <span class="nl">newPassword</span><span class="p">:</span><span class="n">newPassword</span> 
                <span class="nl">oldPassword</span><span class="p">:</span><span class="n">oldPassword</span> 
                   <span class="nl">callback</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">newKeystore</span><span class="p">)</span> <span class="p">{</span>

       <span class="k">if</span> <span class="p">(</span><span class="n">newKeystore</span><span class="p">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
           <span class="c1">//success</span>
           <span class="c1">//Keystore is saved in files or databases</span>
       <span class="p">}</span><span class="k">else</span> <span class="p">{</span>
           <span class="c1">//fail</span>
       <span class="p">}</span>
<span class="p">}];</span>
   
</pre></div>
</div>
</div>
<div class="section" id="decrypt-keystore">
<h2>Decrypt keystore<a class="headerlink" href="#decrypt-keystore" title="Permalink to this headline">¶</a></h2>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  @param keystoreJson : Keystore JSON encryption format for user wallet private key</span>
<span class="cm"> *  @param password : Wallet password</span>
<span class="cm"> *  @param callback : Callback after the end. Callback after the end;The attributes of a class has mnemonicPhras , address, privateKey, keystore</span>
<span class="cm"> */</span>
<span class="p">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">decryptkeystore:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">keystoreJson</span>
              <span class="nf">password:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">password</span>
              <span class="nf">callback:</span><span class="p">(</span><span class="kt">void</span><span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="n">WalletAccountModel</span> <span class="o">*</span><span class="n">account</span><span class="p">,</span><span class="bp">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">))</span><span class="nv">callback</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="c1">//Get the private key through the keystore</span>
<span class="bp">NSString</span> <span class="o">*</span><span class="n">keystoreJson</span> <span class="o">=</span> <span class="s">@&quot;{</span><span class="se">\&quot;</span><span class="s">address</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">36d7189625587d7c4c806e0856b6926af8d36fea</span><span class="se">\&quot;</span><span class="s">,</span><span class="se">\&quot;</span><span class="s">crypto</span><span class="se">\&quot;</span><span class="s">:{</span><span class="se">\&quot;</span><span class="s">cipher</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">aes-128-ctr</span><span class="se">\&quot;</span><span class="s">,</span><span class="se">\&quot;</span><span class="s">cipherparams</span><span class="se">\&quot;</span><span class="s">:{</span><span class="se">\&quot;</span><span class="s">iv</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">c4a723d57e1325a99d88572651959a9d</span><span class="se">\&quot;</span><span class="s">},</span><span class="se">\&quot;</span><span class="s">ciphertext</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">73a4a3a6e8706d099b536e41f6799e71ef9ff3a9f115e21c58d9e81ade036705</span><span class="se">\&quot;</span><span class="s">,</span><span class="se">\&quot;</span><span class="s">kdf</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">scrypt</span><span class="se">\&quot;</span><span class="s">,</span><span class="se">\&quot;</span><span class="s">kdfparams</span><span class="se">\&quot;</span><span class="s">:{</span><span class="se">\&quot;</span><span class="s">dklen</span><span class="se">\&quot;</span><span class="s">:32,</span><span class="se">\&quot;</span><span class="s">n</span><span class="se">\&quot;</span><span class="s">:262144,</span><span class="se">\&quot;</span><span class="s">p</span><span class="se">\&quot;</span><span class="s">:1,</span><span class="se">\&quot;</span><span class="s">r</span><span class="se">\&quot;</span><span class="s">:8,</span><span class="se">\&quot;</span><span class="s">salt</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">a322d4dce0f075f95a7748c008048bd3f80dbb5645dee37576ea93fd119feda2</span><span class="se">\&quot;</span><span class="s">},</span><span class="se">\&quot;</span><span class="s">mac</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">66744cc5967ff5858266c247dbb088e0986c6f1d50156b5e2ce2a19afdc0e498</span><span class="se">\&quot;</span><span class="s">},</span><span class="se">\&quot;</span><span class="s">id</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">0fe540de-1957-4bfe-a326-16772e61f677</span><span class="se">\&quot;</span><span class="s">,</span><span class="se">\&quot;</span><span class="s">version</span><span class="se">\&quot;</span><span class="s">:3}&quot;</span><span class="p">;</span>

<span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">decryptKeystore</span><span class="p">:</span><span class="n">keystoreJson</span>
                    <span class="nl">password</span><span class="p">:</span><span class="s">@&quot;123456&quot;</span> 
                    <span class="nl">callback</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">privatekey</span><span class="p">,</span> <span class="bp">NSError</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
       
       <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
           <span class="c1">//success</span>
           
           <span class="c1">//privateKey:0xbc9fe2428a8faec37674412c113f4a9a66b2e40076014547bfe7bbdc2c5a85ee</span>

       <span class="p">}</span><span class="k">else</span> <span class="c1">//fail</span>
       <span class="p">{</span>
           
       <span class="p">}</span>
<span class="p">}];</span>
</pre></div>
</div>
</div>
<div class="section" id="encrypted-private-key">
<h2>Encrypted private key<a class="headerlink" href="#encrypted-private-key" title="Permalink to this headline">¶</a></h2>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  @param password : Wallet password</span>
<span class="cm"> *  @param privateKey : PrivateKey</span>
<span class="cm"> *  @param callback : Callback after the end. keystoreJson : Keystore in json format</span>
<span class="cm"> */</span>
<span class="p">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">encryptPrivateKeyWithPassword:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">password</span>
                           <span class="nf">privateKey:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">privateKey</span>
                             <span class="nf">callback:</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="bp">NSString</span> <span class="o">*</span><span class="n">keystoreJson</span><span class="p">))</span><span class="nv">callback</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span> <span class="c1">//Private key to keystore</span>
 <span class="bp">NSString</span> <span class="o">*</span><span class="n">privatekey</span> <span class="o">=</span> <span class="s">@&quot;0xbc9fe2428a8faec37674412c113f4a9a66b2e40076014547bfe7bbdc2c5a85ee&quot;</span><span class="p">;</span>
 <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">encryptPrivateKeyWithPassword</span><span class="p">:</span><span class="s">@&quot;123&quot;</span>
                                 <span class="nl">privateKey</span><span class="p">:</span><span class="n">privatekey</span>
                                   <span class="nl">callback</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">keystoreJson</span><span class="p">)</span> <span class="p">{</span>
                                          
                                          <span class="bp">NSString</span> <span class="o">*</span><span class="n">address</span> <span class="o">=</span> <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">getAddressWithKeystore</span><span class="p">:</span><span class="n">keystoreJson</span><span class="p">];</span>
                                          <span class="c1">//address:0x36D7189625587D7C4c806E0856b6926Af8d36FEa</span>
                                      <span class="p">}];</span>
</pre></div>
</div>
</div>
<div class="section" id="get-checksum-address">
<h2>Get checksum address<a class="headerlink" href="#get-checksum-address" title="Permalink to this headline">¶</a></h2>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  @param address :Wallet address</span>
<span class="cm"> *  @return checksum address</span>
<span class="cm"> */</span>
<span class="p">+</span> <span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">getChecksumAddress:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">address</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span> <span class="c1">//Get checksum address</span>
 <span class="bp">NSString</span> <span class="o">*</span><span class="n">address</span> <span class="o">=</span> <span class="s">@&quot;0x36d7189625587d7c4c806e0856b6926af8d36fea&quot;</span><span class="p">;</span>
 <span class="bp">NSString</span> <span class="o">*</span><span class="n">checksumAddress</span> <span class="o">=</span> <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">getChecksumAddress</span><span class="p">:</span><span class="n">address</span><span class="p">];</span>
 <span class="c1">//checkSumAddress:0x36D7189625587D7C4c806E0856b6926Af8d36FEa</span>
</pre></div>
</div>
</div>
<div class="section" id="get-address-from-keystore">
<h2>Get address from keystore<a class="headerlink" href="#get-address-from-keystore" title="Permalink to this headline">¶</a></h2>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  @param keystoreJson :  Keystore JSON encryption format for user wallet private key</span>
<span class="cm"> */</span>
<span class="p">+</span> <span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">getAddressWithKeystore:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">keystoreJson</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="c1">//Get the address through the keystore</span>
<span class="bp">NSString</span> <span class="o">*</span><span class="n">keystoreJson</span> <span class="o">=</span> <span class="s">@&quot;{</span><span class="se">\&quot;</span><span class="s">address</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">36d7189625587d7c4c806e0856b6926af8d36fea</span><span class="se">\&quot;</span><span class="s">,</span><span class="se">\&quot;</span><span class="s">crypto</span><span class="se">\&quot;</span><span class="s">:{</span><span class="se">\&quot;</span><span class="s">cipher</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">aes-128-ctr</span><span class="se">\&quot;</span><span class="s">,</span><span class="se">\&quot;</span><span class="s">cipherparams</span><span class="se">\&quot;</span><span class="s">:{</span><span class="se">\&quot;</span><span class="s">iv</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">c4a723d57e1325a99d88572651959a9d</span><span class="se">\&quot;</span><span class="s">},</span><span class="se">\&quot;</span><span class="s">ciphertext</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">73a4a3a6e8706d099b536e41f6799e71ef9ff3a9f115e21c58d9e81ade036705</span><span class="se">\&quot;</span><span class="s">,</span><span class="se">\&quot;</span><span class="s">kdf</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">scrypt</span><span class="se">\&quot;</span><span class="s">,</span><span class="se">\&quot;</span><span class="s">kdfparams</span><span class="se">\&quot;</span><span class="s">:{</span><span class="se">\&quot;</span><span class="s">dklen</span><span class="se">\&quot;</span><span class="s">:32,</span><span class="se">\&quot;</span><span class="s">n</span><span class="se">\&quot;</span><span class="s">:262144,</span><span class="se">\&quot;</span><span class="s">p</span><span class="se">\&quot;</span><span class="s">:1,</span><span class="se">\&quot;</span><span class="s">r</span><span class="se">\&quot;</span><span class="s">:8,</span><span class="se">\&quot;</span><span class="s">salt</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">a322d4dce0f075f95a7748c008048bd3f80dbb5645dee37576ea93fd119feda2</span><span class="se">\&quot;</span><span class="s">},</span><span class="se">\&quot;</span><span class="s">mac</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">66744cc5967ff5858266c247dbb088e0986c6f1d50156b5e2ce2a19afdc0e498</span><span class="se">\&quot;</span><span class="s">},</span><span class="se">\&quot;</span><span class="s">id</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">0fe540de-1957-4bfe-a326-16772e61f677</span><span class="se">\&quot;</span><span class="s">,</span><span class="se">\&quot;</span><span class="s">version</span><span class="se">\&quot;</span><span class="s">:3}&quot;</span><span class="p">;</span>
   
<span class="bp">NSString</span> <span class="o">*</span><span class="n">address</span> <span class="o">=</span> <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">getAddressWithKeystore</span><span class="p">:</span><span class="n">keystoreJson</span><span class="p">];</span>
<span class="c1">//address:0x36D7189625587D7C4c806E0856b6926Af8d36FEa</span>
</pre></div>
</div>
</div>
<div class="section" id="get-chaintag-of-block-chain">
<h2>Get chainTag of block chain<a class="headerlink" href="#get-chaintag-of-block-chain" title="Permalink to this headline">¶</a></h2>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  @param callback : Callback after the end</span>
<span class="cm"> */</span>
<span class="p">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">getChainTag:</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="bp">NSString</span> <span class="o">*</span><span class="n">chainTag</span><span class="p">))</span><span class="nv">callback</span><span class="p">;</span>
   
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="c1">//Get the chain tag of the block chain</span>
<span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">getChainTag</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">chainTag</span><span class="p">)</span> <span class="p">{</span>
       <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;chainTag == %@&quot;</span><span class="p">,</span><span class="n">chainTag</span><span class="p">);</span>
       
       <span class="c1">//Main_Node chainTag:0x4a</span>
       <span class="c1">//Test_Node chainTag:0x27</span>
<span class="p">}];</span>
   
</pre></div>
</div>
</div>
<div class="section" id="get-the-blockref">
<h2>Get the blockRef<a class="headerlink" href="#get-the-blockref" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>&#64;param callback : Callback after the end.</div></blockquote>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  @param callback : Callback after the end</span>
<span class="cm"> */</span>
<span class="p">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">getBlockRef:</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="bp">NSString</span> <span class="o">*</span><span class="n">blockRef</span><span class="p">))</span><span class="nv">callback</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="c1">//Get the blockRef  </span>
<span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">getBlockRef</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">blockRef</span><span class="p">)</span> <span class="p">{</span>
           <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;blockRef == %@&quot;</span><span class="p">,</span><span class="n">blockRef</span><span class="p">);</span>
<span class="p">}];</span>
</pre></div>
</div>
</div>
<div class="section" id="sign-and-send-transaction">
<h2>Sign and send transaction<a class="headerlink" href="#sign-and-send-transaction" title="Permalink to this headline">¶</a></h2>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  @param parameter : Signature parameters</span>
<span class="cm"> *  @param keystoreJson :  Keystore JSON encryption format for user wallet private key</span>
<span class="cm"> *  @param password : Wallet password</span>
<span class="cm"> *  @param callback : Callback after the end</span>
<span class="cm"> */</span>
<span class="p">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">signAndSendTransferWithParameter:</span><span class="p">(</span><span class="n">TransactionParameter</span> <span class="o">*</span><span class="p">)</span><span class="nv">parameter</span>
                                <span class="nf">keystore:</span><span class="p">(</span><span class="bp">NSString</span><span class="o">*</span><span class="p">)</span><span class="nv">keystoreJson</span>
                                <span class="nf">password:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">password</span>
                                <span class="nf">callback:</span><span class="p">(</span><span class="kt">void</span><span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="bp">NSString</span> <span class="o">*</span><span class="n">txId</span><span class="p">))</span><span class="nv">callback</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span> <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">signAndSendTransferWithParameter</span><span class="p">:</span><span class="n">transactionModel</span>
                                      <span class="nl">keystore</span><span class="p">:</span><span class="n">keystore</span>
                                      <span class="nl">password</span><span class="p">:</span><span class="n">password</span>
                                      <span class="nl">callback</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">txId</span><span class="p">)</span>
                     <span class="p">{</span>
                         <span class="c1">//Developers can use txid to query the status of data packaged on the chain</span>

                         <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;</span><span class="se">\n</span><span class="s"> txId: %@&quot;</span><span class="p">,</span> <span class="n">txid</span><span class="p">);</span>
                         
                         <span class="c1">// Pass txid and signature address back to dapp webview</span>
                         <span class="bp">NSString</span> <span class="o">*</span><span class="n">singerAddress</span> <span class="o">=</span> <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">getAddressWithKeystore</span><span class="p">:</span><span class="n">keystore</span><span class="p">];</span>
                         <span class="n">callback</span><span class="p">(</span><span class="n">txid</span><span class="p">,</span><span class="n">singerAddress</span><span class="p">.</span><span class="n">lowercaseString</span><span class="p">);</span>
                         
                     <span class="p">}];</span>
</pre></div>
</div>
<p>TransactionParameter attribute description：</p>
<ul class="simple">
<li>clauses : NSArry<Clause> - Multi-transaction information</li>
<li>gas : NSString  - Miner Fee Parameters for Packing</li>
<li>chainTag : NSString - Genesis block ID last byte hexadecimal.[WalletUtils getChainTag]</li>
<li>blockRef : NSString - Refer to the last 8 bytes of blockId in hexadecimal.[WalletUtils getBlockRef]</li>
<li>nonce : NSString  - The random number of trading entities. Changing Nonce can make the transaction have different IDs, which can be used to accelerate the trader.</li>
<li>gasPriceCoef : NSString - This value adjusts the priority of the transaction, and the current value range is between 0 and 255 (decimal),The default value is “0”</li>
<li>expiration : NSString - Deal expiration/expiration time in blocks,The default value is “720”</li>
<li>dependsOn :NSString - The ID of the dependent transaction. If the field is not empty, the transaction will be executed only if the transaction specified by it already exists.The default value is null.</li>
<li>reserveds: List  -  Currently empty, reserve fields. Reserved fields for backward compatibility,The default value is null</li>
</ul>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span>    <span class="bp">NSMutableData</span><span class="o">*</span> <span class="n">randomData</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSMutableData</span> <span class="n">alloc</span><span class="p">]</span><span class="nl">initWithCapacity</span><span class="p">:</span><span class="mi">8</span><span class="p">];</span>
    <span class="n">randomData</span><span class="p">.</span><span class="n">length</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">SecRandomCopyBytes</span><span class="p">(</span><span class="n">kSecRandomDefault</span><span class="p">,</span> <span class="n">randomData</span><span class="p">.</span><span class="n">length</span><span class="p">,</span> <span class="n">randomData</span><span class="p">.</span><span class="n">mutableBytes</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
       
        <span class="k">return</span> <span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">//nonce: hex string</span>
    <span class="bp">NSString</span> <span class="o">*</span><span class="n">nonce</span> <span class="o">=</span> <span class="p">[</span><span class="n">BigNumber</span> <span class="nl">bigNumberWithData</span><span class="p">:</span><span class="n">randomData</span><span class="p">].</span><span class="n">hexString</span><span class="p">;</span>

    <span class="n">TransactionParameter</span> <span class="o">*</span><span class="n">transactionModel</span> <span class="o">=</span> <span class="p">[</span><span class="n">TransactionParameterBuiler</span> <span class="nl">creatTransactionParameter</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">TransactionParameterBuiler</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">builder</span><span class="p">)</span> <span class="p">{</span>
                
                <span class="n">builder</span><span class="p">.</span><span class="n">chainTag</span>        <span class="o">=</span> <span class="n">chainTag</span><span class="p">;</span>
                <span class="n">builder</span><span class="p">.</span><span class="n">blockRef</span>  <span class="o">=</span> <span class="n">blockRef</span><span class="p">;</span>
                <span class="n">builder</span><span class="p">.</span><span class="n">nonce</span>           <span class="o">=</span> <span class="n">nonce</span><span class="p">;</span>
                <span class="n">builder</span><span class="p">.</span><span class="n">clauses</span>         <span class="o">=</span> <span class="n">clauseList</span><span class="p">;</span>
                <span class="n">builder</span><span class="p">.</span><span class="n">gas</span>             <span class="o">=</span> <span class="n">gas</span><span class="p">;</span>
                <span class="n">builder</span><span class="p">.</span><span class="n">expiration</span>      <span class="o">=</span> <span class="n">expiration</span><span class="p">;</span>
                <span class="n">builder</span><span class="p">.</span><span class="n">gasPriceCoef</span>    <span class="o">=</span> <span class="n">gasPriceCoef</span><span class="p">;</span>
                
            <span class="p">}</span> <span class="nl">checkParams</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">errorMsg</span><span class="p">)</span> <span class="p">{</span>
               
            <span class="p">}];</span>
    <span class="p">}];</span>
    
</pre></div>
</div>
</div>
<div class="section" id="sign-transaction">
<h2>Sign transaction<a class="headerlink" href="#sign-transaction" title="Permalink to this headline">¶</a></h2>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  @param parameter : Transaction parameters</span>
<span class="cm"> *  @param keystoreJson :  Keystore JSON encryption format for user wallet private key</span>
<span class="cm"> *  @param password : Wallet password</span>
<span class="cm"> *  @param callback :  Callback after the end. raw: RLP encode data and signature</span>
<span class="cm"> */</span>
<span class="p">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">signWithParameter:</span><span class="p">(</span><span class="n">TransactionParameter</span> <span class="o">*</span><span class="p">)</span><span class="nv">parameter</span>
                 <span class="nf">keystore:</span><span class="p">(</span><span class="bp">NSString</span><span class="o">*</span><span class="p">)</span><span class="nv">keystoreJson</span>
                 <span class="nf">password:</span><span class="p">(</span><span class="bp">NSString</span><span class="o">*</span><span class="p">)</span><span class="nv">password</span>
                 <span class="nf">callback:</span><span class="p">(</span><span class="kt">void</span><span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="bp">NSString</span> <span class="o">*</span><span class="n">raw</span><span class="p">))</span><span class="nv">callback</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span> <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">signWithParameter</span><span class="p">:</span><span class="n">transactionModel</span>
                       <span class="nl">keystore</span><span class="p">:</span><span class="n">keystore</span>
                       <span class="nl">password</span><span class="p">:</span><span class="n">password</span>
                       <span class="nl">callback</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">raw</span><span class="p">)</span>
                     <span class="p">{</span>

                         <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;</span><span class="se">\n</span><span class="s"> raw: %@&quot;</span><span class="p">,</span> <span class="n">raw</span><span class="p">);</span>
                         
                     <span class="p">}];</span>
                     
</pre></div>
</div>
</div>
<div class="section" id="support-dapp-development-environment-in-webview-by-calling-class-walletdapphandle">
<h2>Support DApp development environment in Webview by calling class: WalletDAppHandle<a class="headerlink" href="#support-dapp-development-environment-in-webview-by-calling-class-walletdapphandle" title="Permalink to this headline">¶</a></h2>
<p>To support the Dapp function, WebView needs the following initialization before opening Dapp.
Initialization is mainly JS injected into connex and web3.
<a class="reference external" href="https://github.com/vechain/connex/blob/master/docs/api.md/">connex reference.</a></p>
<div class="section" id="set-delegate-to-sdk">
<h3>Set delegate to SDK<a class="headerlink" href="#set-delegate-to-sdk" title="Permalink to this headline">¶</a></h3>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">weak</span><span class="p">)</span> <span class="kt">id</span><span class="o">&lt;</span><span class="n">WalletDAppHandleDelegate</span><span class="o">&gt;</span> <span class="n">delegate</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span> <span class="c1">// Set delegate</span>
 <span class="k">@interface</span> <span class="nc">DemoWebViewVC</span> <span class="p">()</span><span class="o">&lt;</span><span class="bp">WKNavigationDelegate</span><span class="p">,</span><span class="bp">WKUIDelegate</span><span class="p">,</span><span class="n">WalletDAppHandleDelegate</span><span class="o">&gt;</span>
<span class="p">...</span>
 <span class="n">_dAppHandle</span> <span class="o">=</span> <span class="p">[[</span><span class="n">WalletDAppHandle</span> <span class="n">alloc</span><span class="p">]</span><span class="n">init</span><span class="p">];</span>
 <span class="n">_dAppHandle</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="nb">self</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="inject-js-into-webview">
<h3>Inject js into webview<a class="headerlink" href="#inject-js-into-webview" title="Permalink to this headline">¶</a></h3>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  @param config : Developer generated WKWebViewConfiguration object</span>
<span class="cm"> */</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">injectJSWithConfig:</span><span class="p">(</span><span class="bp">WKWebViewConfiguration</span> <span class="o">*</span><span class="p">)</span><span class="nv">config</span><span class="p">;</span>  
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span> <span class="c1">// Please note that, This is a &#39;WKWebView&#39; object, does not support a &quot;UIWebView&quot; object.</span>

 <span class="bp">WKWebViewConfiguration</span><span class="o">*</span> <span class="n">configuration</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">WKWebViewConfiguration</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
 <span class="n">configuration</span><span class="p">.</span><span class="n">userContentController</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">WKUserContentController</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
    
 <span class="c1">//inject js to wkwebview</span>
 
 <span class="p">[</span><span class="n">_dAppHandle</span> <span class="nl">injectJSWithConfig</span><span class="p">:</span><span class="n">configuration</span><span class="p">];</span>
</pre></div>
</div>
</div>
<div class="section" id="parsing-data-in-webview-s-callback-method-runjavascripttextinputpanelwithprompt">
<h3>Parsing data in webview’s callback method runJavaScriptTextInputPanelWithPrompt<a class="headerlink" href="#parsing-data-in-webview-s-callback-method-runjavascripttextinputpanelwithprompt" title="Permalink to this headline">¶</a></h3>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  @param webView : The web view invoking the delegate method.</span>
<span class="cm"> *  @param defaultText : The initial text to display in the text entry field.</span>
<span class="cm"> *  @param completionHandler : The completion handler to call after the text</span>
<span class="cm">input panel has been dismissed. Pass the entered text if the user chose</span>
<span class="cm">OK, otherwise nil.</span>
<span class="cm">*/</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">webView:</span><span class="p">(</span><span class="bp">WKWebView</span> <span class="o">*</span><span class="p">)</span><span class="nv">webView</span> 
    <span class="nf">defaultText:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">defaultText</span> 
<span class="nf">completionHandler:</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="bp">NSString</span> <span class="o">*</span><span class="n">result</span><span class="p">))</span><span class="nv">completionHandler</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm">* You must implement this delegate method to call js.</span>
<span class="cm">*/</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">webView:</span><span class="p">(</span><span class="bp">WKWebView</span> <span class="o">*</span><span class="p">)</span><span class="nv">webView</span> <span class="nf">runJavaScriptTextInputPanelWithPrompt:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">prompt</span> <span class="nf">defaultText:</span><span class="p">(</span><span class="n">nullable</span> <span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">defaultText</span> <span class="nf">initiatedByFrame:</span><span class="p">(</span><span class="bp">WKFrameInfo</span> <span class="o">*</span><span class="p">)</span><span class="nv">frame</span> <span class="nf">completionHandler:</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="bp">NSString</span> <span class="o">*</span> <span class="n">__nullable</span> <span class="n">result</span><span class="p">))</span><span class="nv">completionHandler</span><span class="p">{</span>
        
    <span class="cm">/*</span>
<span class="cm">     You must call this method. It is used to response web3 or connex operations.</span>
<span class="cm">     */</span>
    <span class="p">[</span><span class="n">_dAppHandle</span> <span class="nl">webView</span><span class="p">:</span><span class="n">webView</span>  <span class="nl">defaultText</span><span class="p">:</span><span class="n">defaultText</span> <span class="nl">completionHandler</span><span class="p">:</span><span class="n">completionHandler</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="memory-recycling-to-prevent-memory-leakage">
<h3>Memory Recycling to Prevent Memory Leakage<a class="headerlink" href="#memory-recycling-to-prevent-memory-leakage" title="Permalink to this headline">¶</a></h3>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">*  Call this method when exiting the contrller where dapp is located</span>
<span class="cm">*/</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">deallocDApp</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">* You must implement this method to free memory, otherwise there may be a memory overflow or leak.</span>
<span class="cm">*/</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">dealloc</span><span class="p">{</span>
   <span class="p">[</span><span class="n">_dAppHandle</span> <span class="n">deallocDApp</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="app-developer-implementation-when-dapp-calls-transaction-function">
<h3>App developer implementation when DApp calls transaction function<a class="headerlink" href="#app-developer-implementation-when-dapp-calls-transaction-function" title="Permalink to this headline">¶</a></h3>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  Delegate function that must be implemented to support the DApp environment</span>
<span class="cm"> *</span>
<span class="cm"> *  @param clauses : Clause model list</span>
<span class="cm"> *  @param gas : Set maximum gas allowed for call</span>
<span class="cm"> *  @param signer : Enforces the specified address to sign the transaction.May be  nil</span>
<span class="cm"> *  @param callback : Callback after the end. txId:Transaction identifier; signer:Signer address</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onWillTransfer:</span><span class="p">(</span><span class="bp">NSArray</span><span class="o">&lt;</span><span class="n">ClauseModel</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="p">)</span><span class="nv">clauses</span>
               <span class="nf">signer:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">signer</span>
                  <span class="nf">gas:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">gas</span>
    <span class="nf">completionHandler:</span><span class="p">(</span><span class="kt">void</span><span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="bp">NSString</span> <span class="o">*</span><span class="n">txId</span> <span class="p">,</span><span class="bp">NSString</span> <span class="o">*</span><span class="n">signer</span><span class="p">))</span><span class="nv">completionHandler</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onWillTransfer:</span><span class="p">(</span><span class="bp">NSArray</span><span class="o">&lt;</span><span class="n">ClauseModel</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="p">)</span><span class="nv">clauses</span>
               <span class="nf">signer:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">signer</span>
                  <span class="nf">gas:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">gas</span>
    <span class="nf">completionHandler:</span><span class="p">(</span><span class="kt">void</span><span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="bp">NSString</span> <span class="o">*</span><span class="n">txid</span> <span class="p">,</span><span class="bp">NSString</span> <span class="o">*</span><span class="n">signer</span><span class="p">))</span><span class="nv">completionHandler</span>
<span class="p">{</span>
   
  <span class="c1">//Get the local keystore</span>
   
   <span class="bp">NSString</span> <span class="o">*</span><span class="n">address</span> <span class="o">=</span> <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">getAddressWithKeystore</span><span class="p">:</span><span class="n">keystore</span><span class="p">];</span>
   
   <span class="c1">//Specified signature address</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">signer</span><span class="p">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">[</span><span class="n">address</span><span class="p">.</span><span class="n">lowercaseString</span> <span class="nl">isEqualToString</span><span class="p">:</span><span class="n">signer</span><span class="p">.</span><span class="n">lowercaseString</span><span class="p">])</span> <span class="p">{</span>
       
       <span class="n">completionHandler</span><span class="p">(</span><span class="s">@&quot;&quot;</span><span class="p">,</span><span class="n">signer</span><span class="p">.</span><span class="n">lowercaseString</span><span class="p">);</span>
       <span class="k">return</span><span class="p">;</span>
   <span class="p">}</span>


   <span class="p">...</span> <span class="n">Preparation</span> <span class="n">parameters</span>
   <span class="p">...</span> <span class="n">Assembly</span> <span class="n">transactionParameter</span>
   <span class="p">...</span> <span class="n">Verify</span> <span class="n">parameters</span>
   <span class="p">...</span> <span class="n">Initiate</span> <span class="n">a</span> <span class="n">transaction</span>

<span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">signAndSendTransferWithParameter</span><span class="p">:</span><span class="n">transactionModel</span>
                                    <span class="nl">keystore</span><span class="p">:</span><span class="n">keystore</span>
                                    <span class="nl">password</span><span class="p">:</span><span class="n">password</span>
                                    <span class="nl">callback</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">txId</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="c1">//Developers can use txid to query the status of data packaged on the chain</span>

                        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;</span><span class="se">\n</span><span class="s"> txId: %@&quot;</span><span class="p">,</span> <span class="n">txid</span><span class="p">);</span>
                        
                        <span class="c1">// Pass txid and signature address back to dapp webview</span>
                        <span class="bp">NSString</span> <span class="o">*</span><span class="n">singerAddress</span> <span class="o">=</span> <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">getAddressWithKeystore</span><span class="p">:</span><span class="n">keystore</span><span class="p">];</span>
                        <span class="n">completionHandler</span><span class="p">(</span><span class="n">txId</span><span class="p">,</span><span class="n">singerAddress</span><span class="p">.</span><span class="n">lowercaseString</span><span class="p">);</span>
                        
                    <span class="p">}];</span>


<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="app-developer-implementation-when-dapp-calls-get-address-function">
<h3>App developer implementation when DApp calls get address function<a class="headerlink" href="#app-developer-implementation-when-dapp-calls-get-address-function" title="Permalink to this headline">¶</a></h3>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  Delegate function that must be implemented to support the DApp environment</span>
<span class="cm"> *  @param callback : Callback after the end</span>
<span class="cm"> */</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onGetWalletAddress:</span><span class="p">(</span><span class="kt">void</span><span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="bp">NSArray</span><span class="o">&lt;</span><span class="bp">NSString</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">addressList</span><span class="p">))</span><span class="nv">callback</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onGetWalletAddress:</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="bp">NSArray</span><span class="o">&lt;</span><span class="bp">NSString</span> <span class="o">*&gt;</span> <span class="o">*</span> <span class="n">_Nonnull</span><span class="p">))</span><span class="nv">callback</span>
<span class="p">{</span>
    <span class="c1">//Get the wallet address from local database or file cache</span>

    <span class="c1">//Callback to webview</span>
    <span class="n">callback</span><span class="p">(</span><span class="l">@[</span><span class="n">address</span><span class="l">]</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="app-developer-implementation-when-dapp-calls-authentication-function">
<h3>App developer implementation when dapp calls authentication function<a class="headerlink" href="#app-developer-implementation-when-dapp-calls-authentication-function" title="Permalink to this headline">¶</a></h3>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *   Delegate function that must be implemented to support the DApp environment</span>
<span class="cm"> *</span>
<span class="cm"> *  @param certificateMessage : string to be signed,form dapp</span>
<span class="cm"> *  @param signer : Enforces the specified address to sign the certificate.May be nil</span>
<span class="cm"> *  @param callback : Callback after the end.signer: Signer address; signatureData : Signature is 65 bytes</span>
<span class="cm">*/</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onWillCertificate:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">certificateMessage</span> 
                  <span class="nf">signer:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">signer</span> 
       <span class="nf">completionHandler:</span><span class="p">(</span><span class="kt">void</span><span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="bp">NSString</span> <span class="o">*</span><span class="n">signer</span><span class="p">,</span> <span class="bp">NSData</span> <span class="o">*</span><span class="n">signatureData</span><span class="p">))</span><span class="nv">completionHandler</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onWillCertificate:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">certificateMessage</span> 
                  <span class="nf">signer:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">signer</span> 
       <span class="nf">completionHandler:</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="bp">NSString</span> <span class="o">*</span> <span class="n">signer</span><span class="p">,</span> <span class="bp">NSData</span> <span class="o">*</span>  <span class="n">signatureData</span><span class="p">))</span><span class="nv">completionHandler</span>
<span class="p">{</span>
  
   
   <span class="k">if</span> <span class="p">(</span><span class="n">signer</span><span class="p">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//Specified signature address</span>
      
       <span class="k">if</span> <span class="p">([</span><span class="n">address</span><span class="p">.</span><span class="n">lowercaseString</span> <span class="nl">isEqualToString</span><span class="p">:</span><span class="n">signer</span><span class="p">.</span><span class="n">lowercaseString</span><span class="p">])</span> <span class="p">{</span>
           
           <span class="c1">//Add the signature address to the authentication signature data  </span>
           <span class="bp">NSString</span> <span class="o">*</span><span class="n">strMessage</span> <span class="o">=</span> <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">addSignerToCertMessage</span><span class="p">:</span><span class="n">signer</span><span class="p">.</span><span class="n">lowercaseString</span> <span class="nl">message</span><span class="p">:</span><span class="n">certificateMessage</span><span class="p">];</span>
           <span class="p">[</span><span class="nb">self</span> <span class="nl">signCert</span><span class="p">:</span><span class="n">strMessage</span> <span class="nl">signer</span><span class="p">:</span><span class="n">address</span><span class="p">.</span><span class="n">lowercaseString</span> <span class="nl">keystore</span><span class="p">:</span><span class="n">keystore</span> <span class="nl">callback</span><span class="p">:</span><span class="n">callback</span><span class="p">];</span>
       <span class="p">}</span><span class="k">else</span><span class="p">{</span>
           <span class="c1">//Cusmtom alert error</span>
           <span class="n">completionHandler</span><span class="p">(</span><span class="s">@&quot;&quot;</span><span class="p">,</span><span class="nb">nil</span><span class="p">);</span>
       <span class="p">}</span>
   <span class="p">}</span><span class="k">else</span><span class="p">{</span>
       
       <span class="c1">//Add the signature address to the authentication signature data  </span>
       <span class="bp">NSString</span> <span class="o">*</span><span class="n">strMessage</span> <span class="o">=</span> <span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">addSignerToCertMessage</span><span class="p">:</span><span class="n">address</span><span class="p">.</span><span class="n">lowercaseString</span> <span class="nl">message</span><span class="p">:</span><span class="n">certificateMessage</span><span class="p">];</span>
       <span class="p">[</span><span class="nb">self</span> <span class="nl">signCert</span><span class="p">:</span><span class="n">strMessage</span> <span class="nl">signer</span><span class="p">:</span><span class="n">address</span><span class="p">.</span><span class="n">lowercaseString</span> <span class="nl">keystore</span><span class="p">:</span><span class="n">keystore</span> <span class="nl">callback</span><span class="p">:</span><span class="n">callback</span><span class="p">];</span>
   <span class="p">}</span>


   <span class="p">...</span> <span class="n">Verify</span> <span class="n">password</span>

                                   
 <span class="bp">NSData</span> <span class="o">*</span><span class="n">dataMessage</span> <span class="o">=</span> <span class="p">[</span><span class="n">strMessage</span> <span class="nl">dataUsingEncoding</span><span class="p">:</span><span class="n">NSUTF8StringEncoding</span><span class="p">];</span>

<span class="p">[</span><span class="n">WalletUtils</span> <span class="nl">signWithMessage</span><span class="p">:</span><span class="n">dataMessage</span>
                    <span class="nl">keystore</span><span class="p">:</span><span class="n">keystore</span> 
                    <span class="nl">password</span><span class="p">:</span><span class="n">password</span>
                    <span class="nl">callback</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSData</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">signatureData</span><span class="p">,</span> <span class="bp">NSError</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
                                        
                                        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
                                            <span class="n">completionHandler</span><span class="p">(</span><span class="n">signer</span><span class="p">,</span><span class="n">signatureData</span><span class="p">);</span>
                                        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                                                                         
                                            <span class="n">completionHandler</span><span class="p">(</span><span class="n">signer</span><span class="p">,</span><span class="nb">nil</span><span class="p">);</span>

                                            <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;error == %@&quot;</span><span class="p">,</span><span class="n">error</span><span class="p">.</span><span class="n">userInfo</span><span class="p">);</span>
                                        <span class="p">}</span>
                                    <span class="p">}];</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="app-developer-implementation-when-dapp-calls-checkownaddress-function">
<h3>App developer implementation when dapp calls checkOwnaddress function<a class="headerlink" href="#app-developer-implementation-when-dapp-calls-checkownaddress-function" title="Permalink to this headline">¶</a></h3>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *  Delegate function that must be implemented to support the DApp environment</span>
<span class="cm"> *  @param address : Address from dapp</span>
<span class="cm"> *  @param callback : Callback after the end</span>
<span class="cm"> */</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onCheckOwnAddress:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">address</span> <span class="nf">callback:</span><span class="p">(</span><span class="kt">void</span><span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="kt">BOOL</span> <span class="n">result</span><span class="p">))</span><span class="nv">callback</span><span class="p">;</span>
</pre></div>
</div>
<p>Eg:</p>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onCheckOwnAddress:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">address</span> <span class="nf">callback:</span><span class="p">(</span><span class="kt">void</span><span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="kt">BOOL</span> <span class="n">result</span><span class="p">))</span><span class="nv">callback</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">([</span><span class="n">localAddrss</span><span class="p">.</span><span class="n">lowercaseString</span> <span class="nl">isEqualToString</span><span class="p">:</span><span class="n">address</span><span class="p">.</span><span class="n">lowercaseString</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">callback</span><span class="p">(</span><span class="nb">YES</span><span class="p">);</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="n">callback</span><span class="p">(</span><span class="nb">NO</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="tips">
<h3>Tips<a class="headerlink" href="#tips" title="Permalink to this headline">¶</a></h3>
<p>Before the release of DApp, it is recommended that different versions of WebView be adapted to ensure the reliable and stable operation of HTML 5 pages.</p>
</div>
<div class="section" id="several-main-data-structures">
<h3>Several main data structures<a class="headerlink" href="#several-main-data-structures" title="Permalink to this headline">¶</a></h3>
<div class="section" id="keystore">
<h4>keystore<a class="headerlink" href="#keystore" title="Permalink to this headline">¶</a></h4>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span>/**
*  Keystore is a json string. Its file structure is as follows:
*
*  — — — — — — — — — — — — — — — — — — — — — — — — — — ——
*      {
*          &quot;version&quot;: 3,
*          &quot;id&quot;: &quot;F56FDA19-FB1B-4752-8EF6-E2F50A93BFB8&quot;,
*          &quot;kdf&quot;: &quot;scrypt&quot;,
*          &quot;mac&quot;: &quot;9a1a1db3b2735c36015a3893402b361d151b4d2152770f4a51729e3ac416d79f&quot;,
*          &quot;cipher&quot;: &quot;aes-128-ctr&quot;
*          &quot;address&quot;: &quot;ea8a62180562ab3eac1e55ed6300ea7b786fb27d&quot;
*          &quot;crypto&quot;: {
*                      &quot;ciphertext&quot;: &quot;d2820582d2434751b83c2b4ba9e2e61d50fa9a8c9bb6af64564fc6df2661f4e0&quot;,
*                      &quot;cipherparams&quot;: {
*                                          &quot;iv&quot;: &quot;769ef3174114a270f4a2678f6726653d&quot;
*                                      },
*                      &quot;kdfparams&quot;: {
*                              &quot;r&quot;: 8,
*                              &quot;p&quot;: 1,
*                              &quot;n&quot;: 262144,
*                              &quot;dklen&quot;: 32,
*                              &quot;salt&quot;: &quot;67b84c3b75f9c0bdf863ea8be1ac8ab830698dd75056b8133350f0f6f7a20590&quot;
*                      },
*          },
*      }
*
*  — — — — — — — — — — — — — — — — — — — — — — — — — — ——
*  Field description:
*          version: This is a version information, when you decryption, you should use the same version.
*          id: You can ignore. It is just a UUIDString.
*          Kdf: This is a encryption function.
*          mac: This is the mac device information.
*          cipher: Describes the encryption algorithm used.
*          address：The wallet address.
*          crypto: This section is the main encryption area.
*
*  If you want to recover a wallet by keystore, you should have the correct password.
*
*/



Resources
[https://github.com/vechain/wallet-iOS-sdk](https://github.com/vechain/wallet-iOS-sdk)
## License

The VeChainThor Wallet SDK is licensed under the ```MIT LICENSE```, also included
in *LICENSE* file in the repository.
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, VeChain Developers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>